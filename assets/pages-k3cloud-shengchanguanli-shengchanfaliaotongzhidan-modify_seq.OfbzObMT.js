import{b as e,a as t,h as a,c as l,q as i,e as n,w as r,F as s,o,d as _,f as c,u,g as d,i as f,t as m}from"./index-MIvYX1nW.js";import{_ as h}from"./uni-easyinput.BboSH9MB.js";import{r as p}from"./uni-app.es.B8zr0lZI.js";import{_ as g}from"./uni-section.C7O4oyAr.js";import{_ as b,a as y,b as j}from"./uni-td.B3Sq6FHr.js";import{_ as q}from"./uni-tag.DOImtkHb.js";import{_ as C}from"./uni-table.CMkDOYII.js";import{s as I}from"./scan_code.bSbj3X8t.js";import"./k3cloudapi.DzDu3BGl.js";import"./stock_loc.BckAHwoS.js";import"./inv_log.BJcJnepW.js";import{P as k}from"./prd_issue_mtr_notice.BhiY0z9R.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.DEYikQDp.js";import"./uni-datetime-picker.D11eskE5.js";const w=v({data:()=>({bill:{},entity:[],detail_entity:[],search_form:{bill_no:""}}),methods:{searchbar_icon_click(e){"prefix"==e&&this.scan_code()},scan_code(){I().then((e=>{this.search_form.bill_no=e.result,this.handle_search()})).catch((t=>{e({icon:"none",title:t})}))},async handle_search(){this.search_form.bill_no?(this.search_form.bill_no=this.search_form.bill_no.trim().toUpperCase(),this.search_form.bill_no.match(/^\d+$/)&&(this.search_form.bill_no="SCFLTZD"+this.search_form.bill_no),await this.load_scfl()):this.bill={}},async load_scfl(){var l,i,n;t({title:"Loading"});let r=await k.view(this.search_form.bill_no);a(),(null==(n=null==(i=null==(l=r.data)?void 0:l.Result)?void 0:i.ResponseStatus)?void 0:n.IsSuccess)?(this.bill=r.data.Result.Result,this.handle_raw_data()):e({icon:"none",title:"未找到单据"})},handle_raw_data(){var e,t,a;let l=[];for(let i of this.bill.Entity)l.push({id:i.Id,seq:i.Seq,new_seq:i.Seq,mo_bill_no:i.MOBILLNO,mto_no:i.MToNo,material_no:i.PrdMaterialId.Number,material_name:null==(e=i.PrdMaterialId.Name[0])?void 0:e.Value,material_spec:null==(t=i.PrdMaterialId.Specification[0])?void 0:t.Value,unit_name:null==(a=i.UnitID.Name[0])?void 0:a.Value,prd_qty:i.PrdQty,issue_notice_qty:i.IssueNoticeQty,issue_noticed_qty:i.IssueNoticedQty,plan_start_date:i.PlanStartDate.split("T")[0]});this.entity=l,this.detail_entity=[]}}},[["render",function(e,t,a,I,k,v){const w=p(l("uni-easyinput"),h),x=f,N=p(l("uni-section"),g),P=p(l("uni-th"),b),S=p(l("uni-tr"),y),V=p(l("uni-td"),j),L=p(l("uni-tag"),q),M=p(l("uni-table"),C);return o(),i(s,null,[n(N,{title:"查询单据编号",type:"square",onClick:t[1]||(t[1]=t=>e.$logger.info(">>>",e.$data))},{default:r((()=>[n(x,{class:"searchbar-container"},{default:r((()=>[n(w,{modelValue:k.search_form.bill_no,"onUpdate:modelValue":t[0]||(t[0]=e=>k.search_form.bill_no=e),placeholder:"请输入单据编号","prefix-icon":"scan",onConfirm:v.handle_search,onClear:v.handle_search,onIconClick:v.searchbar_icon_click,"primary-color":"rgb(238, 238, 238)",styles:{color:"#000",backgroundColor:"rgb(238, 238, 238)",borderColor:"rgb(238, 238, 238)"}},null,8,["modelValue","onConfirm","onClear","onIconClick","styles"])])),_:1})])),_:1}),n(N,{title:"生产订单",type:"square"},{default:r((()=>["h5"===e.$store.state.screen_type?(o(),_(M,{key:0,ref:"table",border:"",stripe:""},{default:r((()=>[n(S,null,{default:r((()=>[n(P,{align:"center",width:"60"},{default:r((()=>[c("原序号")])),_:1}),n(P,{align:"center",width:"60"},{default:r((()=>[c("序号")])),_:1}),n(P,{align:"center"},{default:r((()=>[c("生产订单编号")])),_:1}),n(P,{align:"center"},{default:r((()=>[c("产品编码")])),_:1}),n(P,{align:"center"},{default:r((()=>[c("产品名称")])),_:1}),n(P,{align:"center"},{default:r((()=>[c("规格型号")])),_:1}),n(P,{align:"center"},{default:r((()=>[c("单位")])),_:1}),n(P,{align:"center"},{default:r((()=>[c("生产数量")])),_:1}),n(P,{align:"center"},{default:r((()=>[c("已发料通知套数")])),_:1}),n(P,{align:"center"},{default:r((()=>[c("本次发料套数")])),_:1}),n(P,{align:"center"},{default:r((()=>[c("计划开工时间")])),_:1}),n(P,{align:"center"},{default:r((()=>[c("计划跟踪号")])),_:1}),n(P,{align:"center"},{default:r((()=>[c("操作")])),_:1})])),_:1}),(o(!0),i(s,null,u(k.entity,((e,t)=>(o(),_(S,{key:t},{default:r((()=>[n(V,{align:"center"},{default:r((()=>[c(m(e.seq),1)])),_:2},1024),n(V,{align:"center"},{default:r((()=>[c(m(e.new_seq),1)])),_:2},1024),n(V,null,{default:r((()=>[c(m(e.mo_bill_no),1)])),_:2},1024),n(V,null,{default:r((()=>[c(m(e.material_no),1)])),_:2},1024),n(V,null,{default:r((()=>[c(m(e.material_name),1)])),_:2},1024),n(V,null,{default:r((()=>[c(m(e.material_spec),1)])),_:2},1024),n(V,{align:"center"},{default:r((()=>[c(m(e.unit_name),1)])),_:2},1024),n(V,{align:"center"},{default:r((()=>[c(m(e.prd_qty),1)])),_:2},1024),n(V,{align:"center"},{default:r((()=>[c(m(e.issue_noticed_qty),1)])),_:2},1024),n(V,{align:"center"},{default:r((()=>[c(m(e.issue_notice_qty),1)])),_:2},1024),n(V,{align:"center"},{default:r((()=>[c(m(e.plan_start_date),1)])),_:2},1024),n(V,{align:"center"},{default:r((()=>[c(m(e.mto_no),1)])),_:2},1024),n(V,{align:"center"},{default:r((()=>[n(L,{text:"\\\\e62a",type:"primary"}),n(L,{text:"下移",type:"primary",class:"uni-ml-2"})])),_:1})])),_:2},1024)))),128))])),_:1},512)):d("",!0)])),_:1})],64)}]]);export{w as default};
