import{aq as o,m as t,p as e,s,r as i,c as a,q as l,e as r,w as n,F as c,o as p,f as d,t as m,d as u,g as f,i as _}from"./index-DsK9pIyj.js";import{_ as h}from"./uni-list-item.BkmqxiQh.js";import{r as k}from"./uni-app.es.CSK8ITuj.js";import{_ as w}from"./uni-list.dJf-6p1_.js";import{_ as g}from"./uni-badge.CO78OwkC.js";import{l as b,g as x}from"./index.uHoH2c2-.js";import{e as y}from"./gen_pdf.C89vt95K.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.DRoE6XYp.js";import"./date-format.Dm3Q97cL.js";import"./k3cloudapi.PCDjx1SF.js";import"./stock_loc.Bj3C3Byx.js";import"./inv_log.D0BShjlW.js";const j=C({data:()=>({door:{count:0,last_timestamp:0,duration:500,threshold:7,open:!1}}),onHide(){this.door.open=!1},methods:{link_to:b,avatar_click(o){let t=Date.now();0===this.door.last_timestamp?(this.door.count=1,this.door.last_timestamp=t):this.door.last_timestamp+this.door.duration>=t?(this.door.count+=1,this.door.last_timestamp=t):(this.door.count=1,this.door.last_timestamp=t),this.door.count>=this.door.threshold&&(this.door.open=!0)},async check_update(){this.$logger.info("检查更新"),x(!0)},about(){const e=o();t({title:"关于",content:[`名称: ${e.appName}`,`版本: ${e.appVersion}`,"作者: caichang"].join("\n"),showCancel:!1,confirmText:"关闭",success:o=>{},fail:o=>{}})},logout(){e({itemList:["退出登录"],success:o=>{0===o.tapIndex&&(this.$logger.info(">>> 退出登录"),s.commit("staff_logout"),i({url:"/pages/login"}))}})},debug(){let o=y();window.open(`#/pages/my/preview_pdf?url=${o}`,"newWindow","width=800")}}},[["render",function(o,t,e,s,i,b){const x=_,y=k(a("uni-list-item"),h),C=k(a("uni-list"),w),j=k(a("uni-badge"),g);return p(),l(c,null,[r(C,{class:"uni-mb-5"},{default:n((()=>[r(y,{title:"关于",style:{padding:"12px 0"}},{header:n((()=>[r(x,{class:"avatar-thumb",onClick:b.avatar_click},{default:n((()=>{var t;return[d(m(null==(t=o.$store.state.cur_staff.FName)?void 0:t.slice(-2)),1)]})),_:1},8,["onClick"])])),body:n((()=>[r(x,null,{default:n((()=>[r(x,{class:"avatar-name uni-mb-5"},{default:n((()=>[d(m(o.$store.state.cur_staff.FName),1)])),_:1})])),_:1})])),_:1})])),_:1}),r(C,{class:"uni-mb-5"},{default:n((()=>[r(y,{title:"重置密码","extra-icon":{type:"compose",size:"24",color:"#007bff"},"show-extra-icon":"",onClick:t[0]||(t[0]=o=>b.link_to("/pages/my/reset_password")),clickable:"","show-arrow":""}),r(y,{title:"设置","extra-icon":{type:"gear",size:"24",color:"#007bff"},"show-extra-icon":"",onClick:t[1]||(t[1]=o=>b.link_to("/pages/my/settings")),clickable:"","show-arrow":""}),r(y,{title:"检查更新",rightText:"如无法在线更新，请联系开发者","extra-icon":{type:"loop",size:"24",color:"#007bff"},"show-extra-icon":"",onClick:b.check_update,clickable:"","show-arrow":""},{body:n((()=>[r(x,{class:"uni-list-item__body"},{default:n((()=>[r(x,{class:"title"},{default:n((()=>[d("检查更新 "),o.$store.state.latest_version>o.$store.state.system_info.appVersionCode?(p(),u(j,{key:0,size:"small",text:"NEW",type:"error"})):f("",!0)])),_:1})])),_:1})])),_:1},8,["onClick"]),r(y,{title:"历次更新说明","extra-icon":{type:"list",size:"24",color:"#007bff"},"show-extra-icon":"",onClick:t[2]||(t[2]=o=>b.link_to("/pages/my/release_note")),clickable:"","show-arrow":""}),r(y,{title:"关于","extra-icon":{type:"info",size:"24",color:"#007bff"},"show-extra-icon":"",onClick:b.about,clickable:"","show-arrow":""},null,8,["onClick"]),i.door.open?(p(),u(y,{key:0,title:"全局状态","extra-icon":{type:"settings",size:"24",color:"#007bff"},"show-extra-icon":"",onClick:t[3]||(t[3]=o=>b.link_to("/pages/api_utils/store/store")),clickable:"","show-arrow":""})):f("",!0),r(y,{title:"脚本工具","extra-icon":{type:"pyq",size:"24",color:"#007bff"},"show-extra-icon":"",onClick:t[4]||(t[4]=o=>b.link_to("/pages/my/utils/index")),clickable:"","show-arrow":""})])),_:1}),r(C,null,{default:n((()=>[r(y,{title:"退出","extra-icon":{color:"#dc3545",size:"24",type:"close"},"show-extra-icon":"",onClick:b.logout,clickable:""},null,8,["onClick"])])),_:1})],64)}],["__scopeId","data-v-fe1cb7a3"]]);export{j as default};
