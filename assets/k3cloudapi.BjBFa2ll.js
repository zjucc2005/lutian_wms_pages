import{a4 as e,a5 as t,s as i,a2 as a,a6 as r}from"./index-CqdXm0r7.js";const o={BD_STOCK:{fields:{FStockId:"FStockId",FName:"名称",FDescription:"描述",FDocumentStatus:"数据状态",FForbidStatus:"禁用状态",FNumber:"编码",FCreateOrgId:"创建组织",FUseOrgId:"使用组织",FCreatorId:"创建人",FModifierId:"最后修改人",FCreateDate:"创建日期",FModifyDate:"最后修改日期",FPrincipal:"仓库负责人",FTel:"联系电话",FAllowATPCheck:"允许ATP检查",FAllowMRPPlan:"允许MRP计划",FIsOpenLocation:"启用仓位管理",FAllowLock:"允许锁库",FAllowMinusQty:"允许即时库存负库存",FAddress:"仓库地址",FForbiderId:"禁用人",FForbidDate:"禁用日期",FSysDefault:"系统预置",FAuditorId:"审核人",FAuditDate:"审核日期",FGroup:"分组",FStockProperty:"仓库属性",FSupplierId:"供应商",FCustomerId:"客户",FStockStatusType:"库存状态类型",FDefStockStatusId:"默认库存状态",FDefReceiveStatusId:"默认收料状态",FTHIRDSTOCKNO:"第三方仓库编码",FAvailableAlert:"参与预警",FThirdStockType:"第三方仓储类型",FAvailablePicking:"参与拣货",FSortingPriority:"拣货优先级（1~9999）",FIsGYStock:"管易仓",FGYStockNumber:"管易仓编码",FGYSynStatus:"管易同步状态",FNotExpQty:"不参与可发量统计",FLocListFormatter:"仓位维度数据列表显示格式",FDeptId:"部门",FIsZYStock:"直运仓",F_JR_Text:"老K3仓库编码",F_PAEZ_CheckBox:"参与计划运算",F_PAEZ_CheckBox1:"销售出库可选",F_PAEZ_CheckBox2:"入库检验"}},STK_INVENTORY:{fields:{FID:"FID",FStockId:"仓库编码","FStockId.FName":"FStockId.FName",FKeeperId:"保管者编码",FOwnerId:"货主编码",FKeeperTypeId:"保管者类型",FMaterialId:"物料编码",FOwnerTypeId:"货主类型",FStockLocId:"仓位",FStockOrgId:"库存组织",FBaseUnitId:"基本单位",FSecUnitId:"库存辅单位",FStockUnitId:"库存主单位","FStockUnitId.FNumber":"FStockUnitId.FNumber",FLot:"批号",FProjectNo:"项目编号",FLockQty:"预留量(主单位)",FSecLockQty:"预留量(辅单位)",FBaseQty:"库存量(基本单位)",FQty:"库存量(主单位)",FMtoNo:"计划跟踪号",FBaseLockQty:"预留量(基本单位)",FProduceDate:"生产日期",FAuxPropId:"辅助属性",FStockStatusId:"库存状态",FSecQty:"库存量(库存辅单位)",FExpiryDate:"有效期至",FBomId:"BOM版本",FAVBQty:"可用量(主单位)",FBaseAVBQty:"可用量(基本单位)",FSecAVBQty:"可用量(库存辅单位)",FUpdateTime:"最后更新日期",F_PAEZ_Date:"最近入库日期",F_PAEZ_Date1:"最早入库日期",F_PAEZ_Text:"文本",F_PAEZ_Text1:"销售员",F_PAEZ_Text2:"客户代码"}},STK_TransferDirect:{fields:{FID:"FID",FBillNo:"单据编号",FDocumentStatus:"单据状态",FStockOrgId:"调入库存组织","FStockOrgId.FName":"FStockOrgId.FName",FDate:"日期",FBillTypeID:"单据类型",FOwnerTypeIdHead:"调入货主类型",FOwnerIdHead:"调入货主",FTransferBizType:"调拨类型",FStockOutOrgId:"调出库存组织","FStockOutOrgId.FName":"FStockOutOrgId.FName",FOwnerTypeOutIdHead:"调出货主类型",FOwnerOutIdHead:"调出货主",FTransferDirect:"调拨方向",FCreatorId:"创建人",FCreateDate:"创建日期",FModifierId:"最后修改人",FModifyDate:"最后修改日期",FApproverId:"审核人",FApproveDate:"审核日期",FCancelDate:"作废日期",FCancellerId:"作废人",FCancelStatus:"作废状态",FStockerId:"仓管员",FStockerGroupId:"库存组",FBaseCurrId:"本位币",FNote:"领料人",FBizType:"业务类型",FSETTLECURRID:"结算币别",FSaleOrgId:"销售组织",FSettleOrgId:"结算组织",FExchangeRate:"汇率",FExchangeTypeId:"汇率类型",FSettleModeId:"结算方式",FRecConditionId:"收款条件",FSaleDeptId:"销售部门",FSaleGroupId:"销售组",FSalerId:"销售员",FIsIncludedTax:"是否含税",FTransferBizTypeId:"跨组织业务类型",FCustID:"对应客户",FSUPPLIERID:"对应供应商",FIsInterLegalPerson:"组织间结算跨法人标识",FIsPriceExcludeTax:"价外税",FThirdSrcId:"第三方源单内码",FThirdSrcBillNo:"第三方源单编码",FThirdSystem:"第三方系统",FIsInvTransPlan:"库存调拨计划",FWriteOffConsign:"冲减普通寄售调拔单结算数量",FOUTDEPTID:"调出部门",FINDEPTID:"调入部门",F_PAEZ_Remarks:"备注",F_PAEZ_Text:"调入仓库"}},BD_CUSTOMER:{fields:{FCUSTID:"FCUSTID",FName:"FName",FShortName:"FShortName",FDescription:"FDescription",F_PAEZ_MulLangText:"曾用名",FDocumentStatus:"单据状态",FForbidStatus:"禁用状态",FNumber:"客户编码",FCreateOrgId:"创建组织",FUseOrgId:"使用组织",FCreatorId:"创建人",FModifierId:"修改人",FCreateDate:"创建日期",FModifyDate:"修改日期",FCOUNTRY:"国家",FPROVINCIAL:"地区",FZIP:"邮政编码",FTEL:"联系电话",FTAXREGISTERCODE:"纳税登记号",FFAX:"传真",FGROUPCUSTID:"对应集团客户",FSUPPLIERID:"对应供应商",FTRADINGCURRID:"结算币别",FSALDEPTID:"销售部门",FSALGROUPID:"销售组",FSELLER:"销售员",FTRANSLEADTIME:"运输提前期",FPRICELISTID:"价目表",FDISCOUNTLISTID:"折扣表",FSETTLETYPEID:"结算方式",FRECEIVECURRID:"收款币别",FRECCONDITIONID:"收款条件",FISCREDITCHECK:"启用信用管理",FAPPROVERID:"审核人",FAPPROVEDATE:"审核日期",FFORBIDDERID:"禁用人",FFORBIDDATE:"禁用日期",FTaxType:"税分类",FCustTypeId:"客户类别",FADDRESS:"通讯地址",FWEBSITE:"公司网址",FGroup:"客户分组",FCompanyScale:"公司规模",FCompanyClassify:"公司类别",FCompanyNature:"公司性质",FCorrespondOrgId:"对应组织",FPriority:"客户优先级",FInvoiceType:"发票类型",FTaxRate:"默认税率",FIsDefPayer:"默认付款方",FCPAdminCode:"订货平台管理员",FIsGroup:"集团客户",FINVOICEADDRESS:"开票通讯地址",FIsTrade:"是否交易客户",FUncheckExpectQty:"不校验可发量",FIsGroupTag:"集团客户标识(仅用于审核操作功能的一个判断标识)",FLegalPerson:"法人代表",FRegisterFund:"注册资本",FFoundDate:"创立日期",FDomains:"行业",FSOCIALCRECODE:"统一社会信用代码",FRegisterAddress:"注册地址",F_PAEZ_Text:"地区国内",F_PAEZ_Combo:"地区（国内）",F_PAEZ_Text1:"负责人"}},BD_EMPINFO:{fields:{FID:"FID",FName:"FName",FDescription:"FDescription",FAddress:"FAddress",FDocumentStatus:"数据状态",FForbidStatus:"禁用状态",FNumber:"编码",FCreateOrgId:"创建组织",FUseOrgId:"使用组织",FCreatorId:"创建人",FModifierId:"修改人",FCreateDate:"创建日期",FModifyDate:"修改日期",FForbidDate:"禁用日期",FForbidderId:"禁用人",FStaffNumber:"员工编号",FAuditorID:"审核人",FAuditDate:"审核日期",FIsHR:"HR员工",FMobile:"移动电话",FEmail:"电子邮箱",FTel:"固定电话",FStaffId:"主任职职员信息",FPersonID:"人员",FFirstCardID:"主证件内码",FIsSHR:"来源于s-HR",FCreateCashier:"创建POS收银员",FCreateUser:"创建Cloud用户",FCashierGrp:"收银员权限组",FCreateSaler:"创建销售员",FUserId:"用户ID",FCashierId:"收银员ID",FSalerId:"销售员ID",FBranchID:"所属门店",FPostId:"所属岗位",FJoinDate:"进店日期",FUniportalNo:"统一账号",FWMSPWD:"密码"}},BD_MATERIAL:{fields:{FMaterialId:"FMATERIALID",FName:"FName",FDescription:"FDescription",FBaseUnitId:"FBaseUnitId","FBaseUnitId.FNumber":"FBaseUnitId.FNumber",FDocumentStatus:"数据状态",FForbidStatus:"禁用状态",FNumber:"编码",FSpecification:"规格型号",FCreateOrgId:"创建组织",FUseOrgId:"使用组织",FCreatorId:"创建人",FModifierId:"修改人",FCreateDate:"创建日期",FModifyDate:"修改日期",FMnemonicCode:"助记码",FForbidderId:"禁用人",FForbidDate:"禁用日期",FApproveDate:"审核日期",FApproverId:"审核人",FImage1:"图片(数据库)",FOldNumber:"旧物料编码",FMaterialGroup:"物料分组","FMaterialGroup.FName":"FMaterialGroup.FName",FPLMMaterialId:"PLM物料内码",FMaterialSRC:"物料来源",FImageFileServer:"参考图(以发布图纸为准)",FImgStorageType:"图片存储类型",FIsSalseByNet:"是否网销",FIsAutoAllocate:"自动分配",FSPUID:"SPU信息",FPinYin:"拼音",FRefStatus:"已使用",F_JR_HBdays:"合并周期（以天为单位）",F_LT_RadioGroup:"是否合并",F_LT_Base:"报关编码",F_PAEZ_baocai:"是否包材",F_PAEZ_PZJY:"品质检验",F_PAEZ_Base:"生产供应组织",F_LT_CX:"产线",F_LT_JHPX:"计划排序码",F_PAEZ_Base1:"仓管员",F_PAEZ_Base2:"库存组织",Fupdatebiaoshi:"更新标识",F_PAEZ_CheckBox:"不能采购",F_PAEZ_Text1:"旧物料名称",F_PAEZ_Text2:"客户型号",F_PAEZ_Remark:"产品要求",F_PAEZ_Assistant:"产品二级大类（按规格）",F_PAEZ_Assistant1:"产品二级大类（按配置）",F_PAEZ_Text3:"类别",F_PAEZ_ImageFileServer:"参考图(以发布图纸为准)",F_PAEZ_ImageFileServer1:"参考图(以发布图纸为准)",F_PAEZ_Decimal2:"盘差率(%)",F_PAEZ_Combo:"电机分厂-分类",F_PAEZ_Text4:"材料",F_PAEZ_Text5:"标准数量",F_PAEZ_Text6:"注塑名称",F_PAEZ_Text7:"颜色",F_PAEZ_Integer1:"加工机型（g）",F_PAEZ_Integer2:"工时产量",F_PLM_CREATOR:"PLM创建人",F_PLM_MODIFIER:"PLM修改人",F_PAEZ_Group:"注塑材料分类",F_PAEZ_Group1:"商品大类（电商）",F_PAEZ_Combo1:"是否客供料",F_PAEZ_Text8:"是否定制",F_PAEZ_Text9:"电商仓位",F_PAEZ_CheckBox2:"基本型",F_PAEZ_Text10:"部件",F_PAEZ_Base5:"备件生产供应组织",F_PAEZ_Base6:"部件类别",F_PAEZ_Text_qtr:"机型",F_PAEZ_Remark_qtr:"技术参数"}},BD_UNIT:{fields:{FUNITID:"FUNITID",FName:"FName",FDocumentStatus:"数据状态",FForbidStatus:"禁用状态",FNumber:"编码",FModifierId:"修改人",FCreatorId:"创建人",FCreateDate:"创建日期",FModifyDate:"修改日期",FIsSystemSet:"系统预置",FIsBaseUnit:"基准计量单位",FApproverId:"审核人",FForbidDate:"禁用日期",FForbidderId:"禁用人",FApproveDate:"审核日期",FUnitGroupId:"所属组别",FPrecision:"精度",FRoundType:"舍入类型"}},BD_WAREHOUSEWORKERS:{fields:{FID:"ID",FName:"FName",FDescription:"FDescription",FDocumentStatus:"数据状态",FForbidStatus:"禁用状态（员工任岗）",FNumber:"职员编码",FModifierId:"修改人",FCreatorId:"创建人",FCreateDate:"创建日期",FModifyDate:"修改日期",FStaffId:"职员内码",FIsUse:"启用",FBizOrgId:"业务组织ID","FBizOrgId.FName":"业务组织",FDeptId:"部门ID","FDeptId.FName":"部门",FForbiddenStatus:"禁用状态","FOperatorGroupId.FNumber":"业务组编号","FOperatorGroupId.FName":"业务组"}},PRD_MO:{fields:{FID:"ID",FName:"Name",FNumber:"Number",FDescription:"Description",FDocumentStatus:"DocumentStatus"}},PAEZ_C_STOCK_LOC:{fields:{FID:"FID",FName:"FName",FDocumentStatus:"数据状态",FForbidStatus:"禁用状态",FNumber:"编码",FStockId:"仓库",FCreateDate:"创建日期"}},PAEZ_C_INV_LOG:{fields:{FID:"FID",FOpSN:"操作序列号",FOpType:"库存操作类型",FStockId:"仓库ID",FStockLocId:"仓位号ID","FStockLocId.FNumber":"仓位号",FMaterialId:"物料编码ID","FMaterialId.FNumber":"物料编码","FMaterialId.FName":"物料名称","FMaterialId.FSpecification":"规格型号",FOpQTY:"操作数量",FStockUnitId:"计量单位ID","FStockUnitId.FName":"计量单位",FInvIncre:"库存变更数量",FInvQTY:"库存批次流水",FBatchNo:"库存批次号",FBillNo:"单据编号",FSupplierId:"供应商ID","FSupplierId.FName":"供应商名称",FRemark:"操作备注",FOpStaffNo:"操作员工编号",FCreateTime:"数据新建时间",FCInvId:"关联C_INV",FReferId:"自关联ID",FReceiver:"收货人"}},PAEZ_C_ISSUEMTR_LOG:{fields:{FID:"FID",FOpSN:"操作序列号",FOpType:"库存操作类型",FStockId:"仓库ID",FMaterialId:"物料编码ID","FMaterialId.FNumber":"物料编码","FMaterialId.FName":"物料名称","FMaterialId.FSpecification":"规格型号",FOpQTY:"操作数量",FStockUnitId:"计量单位ID","FStockUnitId.FName":"计量单位",FBatchNo:"库存批次号",FBillNo:"单据编号",FRemark:"操作备注",FOpStaffNo:"操作员工编号",FCreateTime:"数据新建时间",FSupplierId:"供应商ID","FSupplierId.FNumber":"供应商编码","FSupplierId.FName":"供应商名称",FReferId:"自关联ID"}}};function F(e){var t=e.split(",");return t[t.length-1]}var d=0;function n(t){return new Promise((function(i,a){if("object"==typeof window&&"document"in window){for(var r=(t=t.split(","))[0].match(/:(.*?);/)[1],o=atob(t[1]),n=o.length,s=new Uint8Array(n);n--;)s[n]=o.charCodeAt(n);return i((window.URL||window.webkitURL).createObjectURL(new Blob([s],{type:r})))}var c=t.split(",")[0].match(/data\:\S+\/(\S+);/);c?c=c[1]:a(new Error("base64 error"));var u=Date.now()+String(d++)+"."+c;if("object"!=typeof plus)if("object"==typeof wx&&e("getFileSystemManager")){p=wx.env.USER_DATA_PATH+"/"+u;wx.getFileSystemManager().writeFile({filePath:p,data:F(t),encoding:"base64",success:function(){i(p)},fail:function(e){a(e)}})}else a(new Error("not support"));else{var l="_doc",I="uniapp_temp",p="_doc/uniapp_temp/"+u;if(!function(e,t){for(var i=e.split("."),a=t.split("."),r=!1,o=0;o<a.length;o++){var F=i[o]-a[o];if(0!==F){r=F>0;break}}return r}("Android"===plus.os.name?"1.9.9.80627":"1.9.9.80472",plus.runtime.innerVersion))return void plus.io.resolveLocalFileSystemURL(l,(function(e){e.getDirectory(I,{create:!0,exclusive:!1},(function(e){e.getFile(u,{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwrite=function(){i(p)},e.onerror=a,e.seek(0),e.writeAsBinary(F(t))}),a)}),a)}),a)}),a);var m=new plus.nativeObj.Bitmap(u);m.loadBase64Data(t,(function(){m.save(p,{},(function(){m.clear(),i(p)}),(function(e){m.clear(),a(e)}))}),(function(e){m.clear(),a(e)}))}}))}let s=t.kd_api[t.env];const c=()=>{var e;return{"kdservice-sessionid":null==(e=i.state.conn_info)?void 0:e.KDSVCSessionId}},u=e=>`${s.endpoint}k3cloud/${e}`,l=e=>{var t;return Object.keys((null==(t=o[e])?void 0:t.fields)||{})},I=async()=>p(),p=async()=>new Promise(((e,o)=>{if(i.state.conn_info&&i.state.conn_expired_at&&i.state.conn_expired_at>Date.now())return e(i.state.conn_info);a({url:u("Kingdee.BOS.WebApi.ServicesStub.AuthService.LoginByAppSecret.common.kdsvc"),method:"POST",data:{acctid:s.acctid,username:s.username,appid:s.appid,appsecret:s.appsecret,lcid:s.lcid},success:a=>{r.info(`>>> 运行环境[${t.env}]`),r.info("K3CloudApi.conn_login_by_app_secret res:",a),i.commit("api_conn",a.data),e(a)},fail:e=>{r.info("K3CloudApi.conn_login_by_app_secret fail:",e),o(e)}})})),m=async(e,t=0)=>I().then((i=>new Promise(((i,o)=>{let F=Date.now();r.info("K3CloudApi.download_file req:",{FileId:e,Nail:t}),a({url:u("Kingdee.BOS.WebApi.ServicesStub.DynamicFormService.AttachmentDownLoad.common.kdsvc"),method:"POST",header:c(),data:{data:{FileId:e,Nail:t}},success:e=>{r.info("K3CloudApi.download_file res:",e),r.info("K3CloudApi.download_file cost",Date.now()-F,"ms"),i(e)},fail:e=>{r.info("K3CloudApi.download_file fail:",e),o(e)}})})))),S=async(e,t=0)=>{let i=await m(e,t);return 200===i.statusCode?"data:image/jpg;base64,"+i.data.Result.FilePart:""},f=e=>{let t=e.match(new RegExp(`(.+)_(${["eq","ne","gt","ge","lt","le","lk","sw","ew","in","ni"].join("|")})`));return t?{field:t[1],compare:t[2]}:{field:e,compare:"eq"}},_={conn:I,full_url:u,view:async(e,t)=>{const i={CreateOrgId:0,Number:"",Id:"",IsSortBySeq:!1,...t};return I().then((t=>new Promise(((t,o)=>{r.info("K3CloudApi.view req:",e,i),a({url:u("Kingdee.BOS.WebApi.ServicesStub.DynamicFormService.View.common.kdsvc"),method:"POST",header:c(),data:{formid:e,data:i},success:e=>{r.info("K3CloudApi.view res:",e),t(e)},fail:e=>{r.info("K3CloudApi.view fail:",e),o(e)}})}))))},submit:async(e,t)=>{const i={CreateOrgId:0,Numbers:[],Ids:"",NetworkCtrl:"",...t};return I().then((t=>new Promise(((t,o)=>{r.info("K3CloudApi.submit req:",e,i),a({url:u("Kingdee.BOS.WebApi.ServicesStub.DynamicFormService.Submit.common.kdsvc"),method:"POST",header:c(),data:{formid:e,data:i},success:e=>{r.info("K3CloudApi.submit res:",e),t(e)},fail:e=>{r.info("K3CloudApi.submit fail:",e),o(e)}})}))))},audit:async(e,t)=>{const i={Numbers:[],Ids:"",...t};return I().then((t=>new Promise(((t,o)=>{r.info("K3CloudApi.audit req:",e,i),a({url:u("Kingdee.BOS.WebApi.ServicesStub.DynamicFormService.Audit.common.kdsvc"),method:"POST",header:c(),data:{formid:e,data:i},success:e=>{r.info("K3CloudApi.audit res:",e),t(e)},fail:e=>{r.info("K3CloudApi.audit fail:",e),o(e)}})}))))},forbid:async(e,t)=>{const i={Numbers:[],Ids:"",...t};return I().then((t=>new Promise(((t,o)=>{r.info("K3CloudApi.forbid req:",e,i),a({url:u("Kingdee.BOS.WebApi.ServicesStub.DynamicFormService.ExecuteOperation.common.kdsvc"),method:"POST",header:c(),data:{formid:e,opNumber:"Forbid",data:i},success:e=>{r.info("K3CloudApi.forbid res:",e),t(e)},fail:e=>{r.info("K3CloudApi.forbid fail:",e),o(e)}})}))))},enable:async(e,t)=>{const i={Numbers:[],Ids:"",...t};return I().then((t=>new Promise(((t,o)=>{r.info("K3CloudApi.enable req:",e,i),a({url:u("Kingdee.BOS.WebApi.ServicesStub.DynamicFormService.ExecuteOperation.common.kdsvc"),method:"POST",header:c(),data:{formid:e,opNumber:"Enable",data:i},success:e=>{r.info("K3CloudApi.enable res:",e),t(e)},fail:e=>{r.info("K3CloudApi.enable fail:",e),o(e)}})}))))},delete:async(e,t)=>{const i={Numbers:[],Ids:"",...t};return I().then((t=>new Promise(((t,o)=>{r.info("K3CloudApi.delete req:",e,i),a({url:u("Kingdee.BOS.WebApi.ServicesStub.DynamicFormService.Delete.common.kdsvc"),method:"POST",header:c(),data:{formid:e,data:i},success:e=>{r.info("K3CloudApi.delete res:",e),t(e)},fail:e=>{r.info("K3CloudApi.delete fail:",e),o(e)}})}))))},save:async(e,t)=>{const i={...t};return I().then((t=>new Promise(((t,o)=>{r.info("K3CloudApi.save req:",i),a({url:u("Kingdee.BOS.WebApi.ServicesStub.DynamicFormService.Save.common.kdsvc"),method:"POST",header:c(),data:{formid:e,data:i},success:e=>{r.info("K3CloudApi.save res:",e),t(e)},fail:e=>{r.info("K3CloudApi.save fail:",e),o(e)}})}))))},batch_save:async(e,t)=>{const i={...t};return I().then((t=>new Promise(((t,o)=>{r.info("K3CloudApi.save req:",e,i),a({url:u("Kingdee.BOS.WebApi.ServicesStub.DynamicFormService.BatchSave.common.kdsvc"),method:"POST",header:c(),data:{formid:e,data:i},success:e=>{r.info("K3CloudApi.batch_save res:",e),t(e)},fail:e=>{r.info("K3CloudApi.batch_save fail:",e),o(e)}})}))))},execute_bill_query:async e=>{const t={FormId:"",FieldKeys:l(e.FormId).join(","),FilterString:[],OrderString:"",TopRowCount:0,StartRow:0,Limit:2e3,SubSystemId:"",...e};return I().then((e=>new Promise(((e,i)=>{let o=Date.now();r.info("K3CloudApi.execute_bill_query req:",t),a({url:u("Kingdee.BOS.WebApi.ServicesStub.DynamicFormService.ExecuteBillQuery.common.kdsvc"),method:"POST",header:c(),data:{data:t},success:t=>{r.info("K3CloudApi.execute_bill_query res:",t),r.info("K3CloudApi.execute_bill_query cost",Date.now()-o,"ms"),e(t)},fail:e=>{r.info("K3CloudApi.execute_bill_query fail:",e),i(e)}})}))))},bill_query:async e=>{const t={FormId:"",FieldKeys:l(e.FormId).join(","),FilterString:[],OrderString:"",TopRowCount:0,StartRow:0,Limit:2e3,SubSystemId:"",...e};return I().then((e=>new Promise(((e,i)=>{let o=Date.now();r.info("K3CloudApi.bill_query req:",t),a({url:u("Kingdee.BOS.WebApi.ServicesStub.DynamicFormService.BillQuery.common.kdsvc"),method:"POST",header:c(),data:{data:t},success:t=>{r.info("K3CloudApi.bill_query res:",t),r.info("K3CloudApi.bill_query cost",Date.now()-o,"ms"),e(t)},fail:e=>{r.info("K3CloudApi.bill_query fail:",e),i(e)}})}))))},push:async(e,t)=>{const i={...t};return I().then((t=>new Promise(((t,o)=>{r.info("K3CloudApi.push req:",i),a({url:u("Kingdee.BOS.WebApi.ServicesStub.DynamicFormService.Push.common.kdsvc"),method:"POST",header:c(),data:{formid:e,data:i},success:e=>{r.info("K3CloudApi.push res:",e),t(e)},fail:e=>{r.info("K3CloudApi.push fail:",e),o(e)}})}))))},upload_file:async e=>{const t={IsLast:!0,...e};return I().then((e=>new Promise(((e,i)=>{let o=Date.now();r.info("K3CloudApi.upload_file req:",t),a({url:u("Kingdee.BOS.WebApi.ServicesStub.DynamicFormService.UploadFile.common.kdsvc"),method:"POST",header:c(),data:{data:t},success:t=>{r.info("K3CloudApi.upload_file res:",t),r.info("K3CloudApi.upload_file cost",Date.now()-o,"ms"),e(t)},fail:e=>{r.info("K3CloudApi.upload_file fail:",e),i(e)}})}))))},download_file:m,download_image_cache:async(e,t=0)=>{let i=await m(e,t);if(200===i.statusCode){return await n("data:image/jpg;base64,"+i.data.Result.FilePart)}return""},download_image_base64:S,thumbnail_url:async(e,t="/static/default_40x40.png")=>{if(null==e?void 0:e.trim()){return await S(e,1)||t}return t},query_filter:(e={})=>{let t=[];for(let i of Object.getOwnPropertyNames(e)){let{field:a,compare:r}=f(i);switch(e[i]instanceof Date?e[i]=e[i].toLocaleString():"string"==typeof e[i]&&(e[i]=e[i].replace(/\'|;/g,"")),r){case"eq":t.push(`${a} = '${e[i]}'`);break;case"ne":t.push(`${a} != '${e[i]}'`);break;case"gt":t.push(`${a} > '${e[i]}'`);break;case"ge":t.push(`${a} >= '${e[i]}'`);break;case"lt":t.push(`${a} < '${e[i]}'`);break;case"le":t.push(`${a} <= '${e[i]}'`);break;case"lk":t.push(`${a} LIKE '%${e[i]}%'`);break;case"sw":t.push(`${a} LIKE '${e[i]}%'`);break;case"ew":t.push(`${a} LIKE '%${e[i]}'`);break;case"in":t.push(`${a} IN (${e[i].map((e=>`'${e}'`))})`);break;case"ni":t.push(`${a} NOT IN (${e[i].map((e=>`'${e}'`))})`)}}return t.join(" AND ")}};export{_ as K,o as d};
