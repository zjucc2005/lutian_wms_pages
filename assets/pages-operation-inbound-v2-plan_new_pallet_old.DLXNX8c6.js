import{s as t,R as e,b as l,m as o,a,h as i,v as s,c as n,q as _,e as r,w as p,d as u,g as c,F as d,i as f,o as m,u as h,f as b,t as y,S as g,k,l as v,T as F}from"./index-DWoH3vfe.js";import{_ as q}from"./uni-steps.TSFIH0tP.js";import{r as w}from"./uni-app.es.BmoqNwAf.js";import{_ as x}from"./uni-list-item.DDtNoANW.js";import{_ as S}from"./uni-list.BUls3DLZ.js";import{_ as I}from"./uni-section.iEIUA4ss.js";import{_ as C,a as j,b as N}from"./uni-td.rHsSWZDb.js";import{_ as $}from"./uni-easyinput.D91VfiYe.js";import{_ as V}from"./uni-icons.Btv09wDc.js";import{_ as B}from"./uni-table.Die1grMA.js";import{_ as L}from"./uni-data-picker.CC4QJBkb.js";import{_ as E,a as T}from"./uni-popup.2slRwCF2.js";import{_ as O}from"./uni-number-box.CYD7DB0b.js";import{_ as M}from"./uni-data-select.DrvDFGBn.js";import{_ as U}from"./uni-goods-nav.CFHsP2dB.js";import{_ as A}from"./uni-drawer.B3uN4wKV.js";import{I as R}from"./inbound_task.B-Mf35VT.js";import"./k3cloudapi.RL4SGN7f.js";import{S as z,I as D,a as Q}from"./stock_loc.DkKMhjD6.js";import"./inv_log.B23E6Sfg.js";import{p as P,a as J,b as Y,c as G}from"./index.CbUtXxpp.js";import{_ as H}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-badge.Dyjwvs1c.js";import"./uni-datetime-picker.C-HBs-Rb.js";import"./uni-load-more.BkwpJTRr.js";import"./date-format.Dm3Q97cL.js";const K=H({data:()=>({inbound_task:{},loc_nos:[],stock_loc_opts:[],invs:[],inv_plans:[],inv_plans_ex:[],inv_plans_preview:[],plan_form:{material_id:"",material_no:"",base_unit_name:"",decimal_unit:!1,op_loc_no:"",per_pallet_qty:2,flex_loc_no:"",pallet_infos:[]},step_options:[{title:"选择物料"},{title:"填写表单"},{title:"预览"},{title:"保存"}],step_active:0,goods_nav:{options:[{icon:"list",text:"物料"}],button_group:[{text:"返回",backgroundColor:t.state.goods_nav_color.grey,color:"#fff"},{text:"预览",backgroundColor:t.state.goods_nav_color.grey,color:"#fff"}]}}),onLoad(t){this.getOpenerEventChannel().on("sendInboundTask",(t=>{t.inbound_task?this.inbound_task=t.inbound_task:this.inbound_task=R.current(),this.load_data(t.material_no)}))},mounted(){z.query({FStockId:t.state.cur_stock.FStockId,FForbidStatus:"B"}).then((e=>{t.commit("update_stock_locs",e.data)}))},methods:{goods_nav_click(t){0===t.index&&this.$refs.material_drawer.open()},goods_nav_button_click(t){0===this.step_active||1===this.step_active?(0===t.index&&e(),1===t.index&&this.preview()):2===this.step_active?(0===t.index&&this.preview_close(),1===t.index&&this.submit_save()):3===this.step_active&&(0===t.index&&e(),1===t.index&&this.if_submit_delete())},material_no_click(t){this.$refs.material_drawer.close(),this.plan_form.material_no!=t&&(this.init_plan_form(t),P("success"))},preview(){if(2===this.step_active)return;if(!this.plan_form.material_no)return void l({icon:"none",title:"请先选择物料"});let t=this.inbound_task.inbound_list.find((t=>t.material_no==this.plan_form.material_no));if(this._sum_qty_of_pallet_info()===t.base_unit_qty)try{let t=[],e=this.plan_form.op_loc_no,l={loc_no:e,qty:0,pallet_infos:[]};this.plan_form.pallet_infos.forEach((o=>{if(o.per_qty&&o.pallet_qty)for(let a=0;a<o.pallet_qty;a++)J(e)&&l.pallet_infos.length>=this.plan_form.per_pallet_qty?(t.push(l),e=this._next_idle_loc_no(e),l={loc_no:e,qty:o.per_qty,pallet_infos:[o.per_qty]}):(l.qty+=o.per_qty,l.pallet_infos.push(o.per_qty))})),l.qty&&t.push(l),this.inv_plans_preview=t,this._activate_step(2),P("success")}catch(e){l({icon:"error",title:e.message})}else l({icon:"none",title:"物料数量不一致"})},preview_close(){this.inv_plans_preview=[],this._activate_step(1),P("delete")},if_submit_delete(){o({title:"删除",content:"是否确定删除当前物料的全部计划明细？",success:t=>{t.confirm&&this.submit_delete()},fail:t=>{}})},add_pallet_info(){this.plan_form.pallet_infos.push({per_qty:"",pallet_qty:""})},del_pallet_info(t){this.plan_form.pallet_infos.splice(t,1)},validate_pallet_info(t,e,o){let a=Number(t.detail.value);a<=0?(e[o]="",a<0&&l({icon:"none",title:"数量必须大于0"})):e[o]=a},open_dialog(t){this.$refs[t].open()},op_loc_no_change(t){var e,l;J(null==(e=t.detail.value.slice(-1)[0])?void 0:e.value)?(l=this.plan_form).per_pallet_qty||(l.per_pallet_qty=2):this.plan_form.per_pallet_qty=0},async load_data(t=""){await this.load_invs(),await this.load_inv_plans(),await this.load_inv_plans_ex(),t&&this.init_plan_form(t)},async load_invs(){let e={FStockId:t.state.cur_stock.FStockId};return a({title:"Loading"}),D.get_all(e,{order:"FMaterialId.FNumber ASC, FStockLocId.FNumber ASC"}).then((t=>{this.$logger.info(">>> 加载库存，完毕"),i(),this.invs=t}))},async load_inv_plans(){return a({title:"Loading"}),Q.query({FStockId:t.state.cur_stock.FStockId,FBillNo:this.inbound_task.bill_no,FOpType:"in"},{order:"FCreateTime ASC"}).then((e=>{this.$logger.info(">>> 加载入库计划，完毕"),i(),this.inv_plans=e.data,this.inv_plans.forEach((e=>{"A"!=e.FDocumentStatu&&(e.status=t.state.document_status_dict[e.FDocumentStatu])}))}))},async load_inv_plans_ex(){return a({title:"Loading"}),Q.query({FStockId:t.state.cur_stock.FStockId,FBillNo_ne:this.inbound_task.bill_no,FOpType:"in",FDocumentStatu_in:["A","B"]},{order:"FCreateTime ASC"}).then((t=>{this.$logger.info(">>> 加载其余入库计划，完毕"),i(),this.inv_plans_ex=t.data}))},async submit_delete(){var t;if(3!==this.step_active)return;let e=this.inv_plans.filter((t=>t.FMaterialId===this.plan_form.material_id));if(e.some((t=>"A"!=t.FDocumentStatu)))return void l({icon:"none",title:"不能删除"});a({title:"Loading"});let o=await Q.delete(e.map((t=>t.FID)));i(),o.data.Result.ResponseStatus.IsSuccess?(P("delete"),await this.load_inv_plans(),this.init_plan_form(this.plan_form.material_no)):l({icon:"none",title:null==(t=o.data.Result.ResponseStatus.Errors[0])?void 0:t.Message})},async submit_save(){if(2!==this.step_active)return;a({title:"Loading"});let e=this.inbound_task.inbound_list.find((t=>t.material_no==this.plan_form.material_no));for(let l=0;l<this.inv_plans_preview.length;l++){let o=this.inv_plans_preview[l],a=new Q({FOpType:"in",FStockId:t.state.cur_stock.FStockId,FStockLocNo:o.loc_no,FMaterialId:e.material_id,FOpQTY:1*o.qty,FBatchNo:e.batch_no,FBillNo:this.inbound_task.bill_no,FOpStaffNo:t.state.cur_staff.FNumber,FRemark:o.pallet_infos.join(","),FPalletQty:o.pallet_infos.length});await a.save()}i(),P("success"),await this.load_inv_plans(),this._activate_step(3),s({scrollTop:0})},init_plan_form(t){a({title:"初始化表单"});let e=this.inbound_task.inbound_list.find((e=>e.material_no==t));this.plan_form.per_pallet_qty=2,this.plan_form.pallet_infos=[{per_qty:"",pallet_qty:""}],this._set_loc_nos(),e?(this.plan_form.material_id=e.material_id,this.plan_form.material_no=e.material_no,this.plan_form.base_unit_name=e.base_unit_name,this.plan_form.decimal_unit=Y(e.base_unit_name),"pallet"==this.inbound_task.category&&this._set_pallet_infos(t),this._allocate_op_loc_no(t),this.inv_plans.some((t=>t.FMaterialId===e.material_id))?this._activate_step(3):this._activate_step(1)):(this.plan_form.material_id="",this.plan_form.material_no="",this.plan_form.base_unit_name="Pcs",this.plan_form.decimal_unit=!1,this.plan_form.op_loc_no="",this._activate_step(0)),i()},_set_pallet_infos(t){let e=[];this.inbound_task.pallet_infos.forEach((l=>{if(l.material_no==t){let t=e.find((t=>t.per_qty==l.base_unit_qty));t?t.pallet_qty+=1:e.push({per_qty:l.base_unit_qty,pallet_qty:1})}})),e.length&&(this.plan_form.pallet_infos=e)},_set_loc_nos(){this.stock_loc_opts=JSON.parse(JSON.stringify(t.state.stock_loc_opts)),this.stock_loc_opts.forEach((t=>{t.children.forEach((t=>{t.children.forEach((t=>t.disable=!this._is_idle(t.value))),0===t.children.length&&(t.disable=!this._is_idle(t.value))}))}));let e=[];t.state.stock_locs.forEach((t=>{e.push({loc_no:t.FNumber,idle:this._is_idle(t.FNumber),sp:!J(t.FNumber)})})),e.sort(((t,e)=>G(t.loc_no,e.loc_no))),this.loc_nos=e},_is_idle(e){return!t.state.stock_locs.find((t=>t.FNumber==e&&"B"==t.FForbidStatus))&&(!J(e)||!this.invs.some((t=>t["FStockLocId.FNumber"]==e))&&!this.inv_plans.some((t=>t["FStockLocId.FNumber"]==e))&&!this.inv_plans_ex.some((t=>t["FStockLocId.FNumber"]==e)))},_activate_step(e){this.step_active=e,0===e?(this.goods_nav.button_group[1].text="预览",this.goods_nav.button_group[1].backgroundColor=t.state.goods_nav_color.grey):1===e?(this.goods_nav.button_group[1].text="预览",this.goods_nav.button_group[1].backgroundColor=t.state.goods_nav_color.yellow):2===e?(this.goods_nav.button_group[1].text="保存",this.goods_nav.button_group[1].backgroundColor=t.state.goods_nav_color.blue):3===e&&(this.goods_nav.button_group[1].text="删除",this.goods_nav.button_group[1].backgroundColor=t.state.goods_nav_color.red)},_allocate_op_loc_no(t){var e;this.$logger.info(">>> 分配起点库位...");let l="",o="";if(this.invs.filter((e=>{e["FMaterialId.FNumber"]==t&&J(e["FStockLocId.FNumber"])&&(l=e["FStockLocId.FNumber"])})),this.$logger.info(">>> 分配起点库位，参考库位",l),l){let t=l.split("-").slice(0,2).join("-"),e=this.loc_nos.filter((e=>e.loc_no.startsWith(t)));for(let a=0;a<e.length&&e[a].loc_no!=l;a++)e[a].idle&&(o||(o=e[a].loc_no)),e[a].idle||(o="");if(!o){let t=this.loc_nos.findIndex((t=>t.loc_no==l));for(let e=t;e<this.loc_nos.length;e++)if(this.loc_nos[e].idle){o=this.loc_nos[e].loc_no;break}if(!o)for(let e=0;e<t;e++)if(this.loc_nos[e].idle&&!this.loc_nos[e].sp){o=this.loc_nos[e].loc_no;break}}}else o=(null==(e=this.loc_nos.filter((t=>t.idle&&!t.sp))[0])?void 0:e.loc_no)||"";this.plan_form.op_loc_no=o,this.$logger.info(">>> 分配起点库位，结果",o)},_next_idle_loc_no(t){let e=this.loc_nos.findIndex((e=>e.loc_no==t)),l=this.loc_nos[e+1];if(!l){if(this.plan_form.flex_loc_no)return this.plan_form.flex_loc_no;throw new Error("库位不足")}return l.idle&&!l.sp?l.loc_no:this._next_idle_loc_no(l.loc_no)},_sum_inv_plan_op_qty(){let t=0;return this.inv_plans.forEach((e=>{e.FMaterialId===this.plan_form.material_id&&(t+=e.FOpQTY)})),t},_sum_qty_of_pallet_info(){let t=0;return this.plan_form.pallet_infos.forEach((e=>{e.per_qty&&e.pallet_qty&&(t+=Number(e.per_qty)*Number(e.pallet_qty))})),t}}},[["render",function(t,e,l,o,a,i){const s=w(n("uni-steps"),q),R=f,z=k,D=w(n("uni-list-item"),x),Q=w(n("uni-list"),S),P=w(n("uni-section"),I),J=w(n("uni-th"),C),Y=w(n("uni-tr"),j),G=w(n("uni-easyinput"),$),H=w(n("uni-td"),N),K=w(n("uni-icons"),V),W=w(n("uni-table"),B),X=v,Z=w(n("uni-data-picker"),L),tt=w(n("uni-popup-dialog"),E),et=w(n("uni-popup"),T),lt=w(n("uni-number-box"),O),ot=w(n("uni-data-select"),M),at=w(n("uni-goods-nav"),U),it=F,st=w(n("uni-drawer"),A);return m(),_(d,null,[r(P,{title:"新增计划明细",type:"square","sub-title":a.inbound_task.bill_no,"sub-title-color":"#007aff"},{default:p((()=>[r(s,{options:a.step_options,active:a.step_active,class:"uni-mt-5 uni-mb-5"},null,8,["options","active"]),a.plan_form.material_no?(m(),u(Q,{key:0},{default:p((()=>[(m(!0),_(d,null,h(a.inbound_task.inbound_list,((l,o)=>(m(),_(d,{key:o},[l.material_no==a.plan_form.material_no&&l.dest_stock_id==t.$store.state.cur_stock.FStockId?(m(),u(D,{key:0,"right-text":[l.base_unit_qty,l.base_unit_name].join(" "),onClick:e[0]||(e[0]=e=>t.$refs.material_drawer.open()),clickable:"","show-arrow":""},{body:p((()=>[r(R,{class:"uni-list-item__body"},{default:p((()=>[r(R,{class:"title"},{default:p((()=>[b(y(l.material_no),1)])),_:2},1024),r(R,{class:"note"},{default:p((()=>[r(R,null,{default:p((()=>[b("名称："+y(l.material_name),1)])),_:2},1024),r(R,null,{default:p((()=>[b("规格："+y(l.material_spec),1)])),_:2},1024),r(R,null,{default:p((()=>[b("调入仓库："),r(z,{class:"text-primary"},{default:p((()=>[b(y(l.dest_stock_name),1)])),_:2},1024)])),_:2},1024),r(R,null,{default:p((()=>[b("批次："+y(l.batch_no),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["right-text"])):c("",!0)],64)))),128))])),_:1})):(m(),u(Q,{key:1},{default:p((()=>[r(D,{"show-extra-icon":!0,"extra-icon":{type:"list",size:"24",color:"#007bff"},title:"点击选择物料",onClick:e[1]||(e[1]=e=>t.$refs.material_drawer.open()),clickable:"","show-arrow":""})])),_:1}))])),_:1},8,["sub-title"]),1===a.step_active?(m(),u(P,{key:0,title:"填写托盘信息",type:"square","sub-title":"‌‌总和 = ∑ (每托数量 x 托数)"},{right:p((()=>[r(R,{class:"uni-section__right"},{default:p((()=>[r(R,null,{default:p((()=>[b(" 总和： "),r(z,{class:"sum_qty"},{default:p((()=>[b(y(i._sum_qty_of_pallet_info()),1)])),_:1}),b(" "+y(a.plan_form.base_unit_name),1)])),_:1})])),_:1})])),default:p((()=>[r(R,{class:"container"},{default:p((()=>[r(W,{ref:"pallet_infos",border:"",stripe:"",class:"pallet-infos"},{default:p((()=>[r(Y,null,{default:p((()=>[r(J,{align:"center",width:"150"},{default:p((()=>[b("每托数量")])),_:1}),r(J,{align:"center",width:"150"},{default:p((()=>[b("托数")])),_:1}),r(J,{align:"center",width:"50"})])),_:1}),(m(!0),_(d,null,h(a.plan_form.pallet_infos,((t,e)=>(m(),u(Y,{key:e},{default:p((()=>[r(H,{align:"center"},{default:p((()=>[r(G,{type:"number",clearable:!1,"input-border":!1,modelValue:t.per_qty,"onUpdate:modelValue":e=>t.per_qty=e,onBlur:e=>i.validate_pallet_info(e,t,"per_qty"),style:{"text-align":"center"}},null,8,["modelValue","onUpdate:modelValue","onBlur"])])),_:2},1024),r(H,{align:"center"},{default:p((()=>[r(G,{type:"number",clearable:!1,"input-border":!1,modelValue:t.pallet_qty,"onUpdate:modelValue":e=>t.pallet_qty=e,onBlur:e=>i.validate_pallet_info(e,t,"pallet_qty"),style:{"text-align":"center"}},null,8,["modelValue","onUpdate:modelValue","onBlur"])])),_:2},1024),r(H,{align:"center"},{default:p((()=>[a.plan_form.pallet_infos.length>1?(m(),u(K,{key:0,type:"minus",size:"24",color:"#dd524d",disabled:"",onClick:t=>i.del_pallet_info(e)},null,8,["onClick"])):c("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1},512),a.plan_form.pallet_infos.length<5?(m(),u(X,{key:0,type:"primary",onClick:i.add_pallet_info,class:"add-pallet-info-btn"},{default:p((()=>[b(" + 新增托盘规格 ")])),_:1},8,["onClick"])):c("",!0)])),_:1})])),_:1})):c("",!0),1===a.step_active?(m(),u(P,{key:1,title:"配置信息",type:"square",class:"above-uni-goods-nav"},{default:p((()=>[r(Q,null,{default:p((()=>[r(D,{title:"起点库位",note:"默认值由系统自动分配，不建议修改",onClick:e[2]||(e[2]=t=>i.open_dialog("op_loc_no_dialog")),clickable:"","show-arrow":""},{footer:p((()=>[r(R,{class:"uni-list-item__foot"},{default:p((()=>[r(R,{class:"op_qty lg"},{default:p((()=>[r(z,{class:"status"},{default:p((()=>[b(y(a.plan_form.op_loc_no),1)])),_:1})])),_:1})])),_:1})])),_:1}),r(D,{title:"每个库位放置托盘数",note:"默认值为2，不建议修改",onClick:e[3]||(e[3]=t=>i.open_dialog("per_pallet_qty_dialog")),clickable:a.plan_form.per_pallet_qty>0,"show-arrow":""},{footer:p((()=>[r(R,{class:"uni-list-item__foot"},{default:p((()=>[r(R,{class:"op_qty lg"},{default:p((()=>[r(z,{class:"status"},{default:p((()=>[b(y(a.plan_form.per_pallet_qty||"∞"),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["clickable"]),r(D,{title:"灵活库位",note:"货架库位分配完后的保留库位",onClick:e[4]||(e[4]=t=>i.open_dialog("flex_loc_no_dialog")),clickable:"","show-arrow":""},{footer:p((()=>[r(R,{class:"uni-list-item__foot"},{default:p((()=>[r(R,{class:"op_qty lg"},{default:p((()=>[r(z,{class:"status"},{default:p((()=>[b(y(a.plan_form.flex_loc_no),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):c("",!0),r(et,{ref:"op_loc_no_dialog",type:"dialog"},{default:p((()=>[r(tt,{title:"起点库位",type:"error","show-close":!1},{default:p((()=>[r(R,{class:"plan-form"},{default:p((()=>[r(Z,{modelValue:a.plan_form.op_loc_no,"onUpdate:modelValue":e[5]||(e[5]=t=>a.plan_form.op_loc_no=t),localdata:a.stock_loc_opts,split:"-","popup-title":"请选择起点库位","clear-icon":!1,onChange:i.op_loc_no_change,class:"op-loc-no-data-picker"},null,8,["modelValue","localdata","onChange"])])),_:1})])),_:1})])),_:1},512),r(et,{ref:"per_pallet_qty_dialog",type:"dialog"},{default:p((()=>[r(tt,{title:"每个库位放置托盘数",type:"error","show-close":!1},{default:p((()=>[r(R,{class:"plan-form"},{default:p((()=>[r(lt,{modelValue:a.plan_form.per_pallet_qty,"onUpdate:modelValue":e[6]||(e[6]=t=>a.plan_form.per_pallet_qty=t),min:1},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},512),r(et,{ref:"flex_loc_no_dialog",type:"dialog"},{default:p((()=>[r(tt,{title:"灵活库位",type:"error","show-close":!1},{default:p((()=>[r(R,{class:"plan-form"},{default:p((()=>[r(ot,{modelValue:a.plan_form.flex_loc_no,"onUpdate:modelValue":e[7]||(e[7]=t=>a.plan_form.flex_loc_no=t),localdata:a.loc_nos.filter((t=>t.sp)).map((t=>({value:t.loc_no,text:t.loc_no})))},null,8,["modelValue","localdata"])])),_:1})])),_:1})])),_:1},512),2===a.step_active?(m(),u(P,{key:2,title:"预览计划明细",type:"square","sub-title":"预览确认无误后，请保存计划",class:"above-uni-goods-nav"},{right:p((()=>[r(R,{class:"uni-section__right"},{default:p((()=>[r(K,{type:"closeempty",size:"24",color:"#333",onClick:i.preview_close},null,8,["onClick"])])),_:1})])),default:p((()=>[r(Q,null,{default:p((()=>[(m(!0),_(d,null,h(a.inv_plans_preview,((t,e)=>(m(),u(D,{key:e,"show-extra-icon":!0,"extra-icon":{type:"arrow-up",size:"24",color:"#dd524d"},title:t.loc_no,note:`${t.pallet_infos.length} 托 (${t.pallet_infos.join(", ")})`,"right-text":`${t.qty} ${this.plan_form.base_unit_name}`},null,8,["title","note","right-text"])))),128))])),_:1})])),_:1})):c("",!0),3===a.step_active?(m(),u(P,{key:3,title:"当前计划明细",type:"square",class:"above-uni-goods-nav"},{right:p((()=>[r(R,{class:"uni-section__right"},{default:p((()=>[r(R,null,{default:p((()=>[b(" 总和： "),r(z,{class:"sum_qty"},{default:p((()=>[b(y(i._sum_inv_plan_op_qty()),1)])),_:1}),b(" "+y(a.plan_form.base_unit_name),1)])),_:1})])),_:1})])),default:p((()=>[r(Q,null,{default:p((()=>[(m(!0),_(d,null,h(a.inv_plans.filter((t=>t.FMaterialId===a.plan_form.material_id)),((t,e)=>(m(),u(D,{key:e,"show-extra-icon":!0,"extra-icon":{type:"arrow-up",size:"24",color:"#dd524d"},title:t["FStockLocId.FNumber"],note:`${t.FPalletQty} 托(${t.FRemark})`},{footer:p((()=>[r(R,{class:"uni-list-item__foot"},{default:p((()=>[r(z,{class:"op_qty"},{default:p((()=>[b(y(t.FOpQTY)+" "+y(t["FStockUnitId.FName"]),1)])),_:2},1024),r(z,{class:"status"},{default:p((()=>[b(y(t.status),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["title","note"])))),128))])),_:1})])),_:1})):c("",!0),r(R,{class:"uni-goods-nav-wrapper"},{default:p((()=>[r(at,{options:a.goods_nav.options,"button-group":a.goods_nav.button_group,fill:t.$store.state.goods_nav_fill,onClick:i.goods_nav_click,onButtonClick:i.goods_nav_button_click},null,8,["options","button-group","fill","onClick","onButtonClick"])])),_:1}),r(st,{ref:"material_drawer",width:t.$store.state.drawer_width},{default:p((()=>[r(it,{"scroll-y":"",style:{height:"100%"},onTouchmove:e[9]||(e[9]=g((()=>{}),["stop"]))},{default:p((()=>[r(P,{title:"入库物料列表",type:"square","sub-title":"点击切换当前物料"},{right:p((()=>[r(R,{class:"uni-section__right"},{default:p((()=>[r(K,{type:"closeempty",size:"20",color:"#333",onClick:e[8]||(e[8]=e=>t.$refs.material_drawer.close())})])),_:1})])),default:p((()=>[r(Q,null,{default:p((()=>[(m(!0),_(d,null,h(a.inbound_task.inbound_list,((e,l)=>(m(),_(d,{key:l},[e.dest_stock_id==t.$store.state.cur_stock.FStockId?(m(),u(D,{key:0,"right-text":[e.base_unit_qty,e.base_unit_name].join(" "),onClick:t=>i.material_no_click(e.material_no),clickable:"","show-arrow":""},{body:p((()=>[r(R,{class:"uni-list-item__body"},{default:p((()=>[r(R,{class:"title"},{default:p((()=>[this.plan_form.material_no==e.material_no?(m(),u(K,{key:0,type:"checkbox-filled",color:"#007aff"})):c("",!0),b(" "+y(e.material_no),1)])),_:2},1024),r(R,{class:"note"},{default:p((()=>[r(R,null,{default:p((()=>[b("名称："+y(e.material_name),1)])),_:2},1024),r(R,null,{default:p((()=>[b("规格："+y(e.material_spec),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["right-text","onClick"])):c("",!0)],64)))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["width"])],64)}],["__scopeId","data-v-4cb530fc"]]);export{K as default};
