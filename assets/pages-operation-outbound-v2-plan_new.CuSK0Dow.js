import{s as t,p as e,m as a,b as o,a as i,h as n,c as s,q as l,e as _,w as r,d as c,g as d,L as u,F as m,i as p,o as h,u as f,f as k,t as F,S as b,k as y,T as g,y as v}from"./index-DWoH3vfe.js";import{_ as q}from"./uni-list-item.DDtNoANW.js";import{r as S}from"./uni-app.es.BmoqNwAf.js";import{_ as I}from"./uni-list.BUls3DLZ.js";import{_ as N}from"./uni-section.iEIUA4ss.js";import{_ as w,a as x}from"./uni-forms.wqQOOOmn.js";import{_ as C}from"./uni-data-picker.CC4QJBkb.js";import{_ as L}from"./uni-easyinput.D91VfiYe.js";import{_ as B}from"./uni-icons.Btv09wDc.js";import{_ as j,a as $}from"./uni-swipe-action.CgJwlpZ9.js";import{_ as Q}from"./uni-load-more.BkwpJTRr.js";import{_ as O}from"./uni-goods-nav.CFHsP2dB.js";import{_ as T}from"./uni-drawer.B3uN4wKV.js";import{_ as M}from"./uni-number-box.CYD7DB0b.js";import{_ as A,a as D}from"./uni-popup.2slRwCF2.js";import{p as V,i as E,a as Y,l as U,b as z}from"./index.CbUtXxpp.js";import"./k3cloudapi.RL4SGN7f.js";import{S as R,a as P,I as G}from"./stock_loc.DkKMhjD6.js";import"./inv_log.B23E6Sfg.js";import{s as H}from"./scan_code.B9tgpVm4.js";import{f as J}from"./date-format.Dm3Q97cL.js";import{_ as K}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-badge.Dyjwvs1c.js";const W=K({data(){return{op_mode:"scan",outbound_task:{},invs:[],inv_editing:{},inv_plans:[],inv_plans_ex:[],plan_form:{material_no:"",loc_no:"",op_qty:"",remark:"",base_unit:"Pcs",base_unit_name:"Pcs",decimal_unit:!1,is_complete:!1},plan_form_rules:{material_no:{rules:[{required:!0,errorMessage:"物料编号不能为空"}]},loc_no:{rules:[{required:!0,errorMessage:"库位号不能为空"},{validateFunction:(e,a,o,i)=>"C"!=t.state.stock_locs.find((t=>t.FNumber==a)).FDocumentStatus?i("此库位号未审核"):this.inv_plans.find((t=>t["FStockLocId.FNumber"]==a))?i("此库位号已有计划明细"):void 0}]},op_qty:{rules:[{required:!0,errorMessage:"计划上架数量不能为空"},{format:"number",errorMessage:"计划上架数量只能输入数字"},{validateFunction:(t,e,a,o)=>{if(e<=0)return o("计划上架数量必须大于0");if(!this.plan_form.decimal_unit&&!Number.isInteger(e))return o("计划上架数量必须为整数");let i=this.outbound_task.outbound_list.find((t=>t.material_no==this.plan_form.material_no)),n=this._sum_planned_qty();return n+e>i.base_unit_qty?o("计划下架数量超过上限"):n+e>this.invs.filter((t=>t["FStockLocId.FNumber"]==this.plan_form.loc_no)).map((t=>t.FQty)).concat([0]).reduce(((t,e)=>t+e))?o("库存数量不足"):void 0}}]}},swipe_options:[{text:"删除",style:{backgroundColor:"#dd524d"}}],goods_nav:{options:[{icon:"list",text:"物料"},{icon:"scan",text:"模式"}],button_group:[{text:"扫码",backgroundColor:t.state.goods_nav_color.red,color:"#fff"},{text:"保存",backgroundColor:t.state.goods_nav_color.blue,color:"#fff"}]}}},onLoad(t){this.getOpenerEventChannel().on("sendOutboundTask",(t=>{this.$logger.info("eventChannel.on sendOutboundTask",t),this.outbound_task=t.outbound_task,t.material_no&&(this.set_plan_form(t.material_no),this.load_data(t.material_no))}))},mounted(){this.set_op_mode("check"),R.query({FStockId:t.state.cur_stock.FStockId,FForbidStatus:"B"}).then((e=>{this.$logger.info(">>> 更新库位禁用信息"),t.commit("update_stock_locs",e.data)}))},computed:{stock_loc_opts(){return this.invs.map((t=>({text:t["FStockLocId.FNumber"],value:t["FStockLocId.FNumber"]})))}},methods:{formatDate:J,swipe_action_click(t,e){0===t.index&&this.submit_delete(e)},goods_nav_click(t){0==t.index&&this.$refs.material_drawer.open(),1==t.index&&this.mode_click()},goods_nav_button_click(t){0==t.index&&("check"==this.op_mode&&this.if_auto_allocate(),"scan"==this.op_mode&&this.scan_code()),1==t.index&&this.submit_save()},checkbox_click(t){let e=this.invs.find((e=>e.FID==t.target.dataset.id));if(!e||e.disabled)return;if(e.checked)return e.checked=!1,e.checked_qty=0,void this.invs.forEach((t=>{t.FQty>t.planned_qty&&(t.disabled=!1)}));let a=this.outbound_task.outbound_list.find((t=>t.material_no==this.plan_form.material_no)),o=this._sum_planned_qty(),i=a.base_unit_qty-o,n=this.invs.filter((t=>t.checked)).map((t=>t.checked_qty)).concat([0]).reduce(((t,e)=>t+e)),s=Math.min(e.FQty,i-n);e.checked=!0,e.checked_qty=s},edit_checked_qty(t){t.checked&&(this.$refs.checked_qty_dialog.open(),this.inv_editing=t)},change_checked_qty(t){this.inv_editing.checked=t>0},material_no_click(t){this.$refs.material_drawer.close(),this.plan_form.material_no!=t&&(this.set_plan_form(t),this.load_data(t),V("success"))},mode_click(){e({itemList:["勾选模式","扫码模式"],success:t=>{V("success"),0==t.tapIndex&&this.set_op_mode("check"),1==t.tapIndex&&this.set_op_mode("scan")}})},if_auto_allocate(){a({title:"一键分配注意事项",content:"一键分配会按先入先出原则，自动生成当前单据中所有物料的出库计划。如果之前已有部分计划，则将计划补充完整。",success:t=>{t.confirm&&this.auto_allocate()},fail:t=>{}})},scan_code(){H().then((t=>{this.handle_scan_code(t.result)})).catch((t=>{o({icon:"none",title:t})}))},async auto_allocate(){this.$logger.info(">>> 一键分配开始"),i({title:"Loading",mask:!0});let e="",a=this.outbound_task.outbound_list.filter((e=>e.stock_id==t.state.cur_stock.FStockId));for(let o=0;o<a.length;o++){let i=a[o];this.set_plan_form(i.material_no),await this.load_inv_plans(i.material_no);let n=this._sum_planned_qty();if(n>=i.base_unit_qty)continue;await this.load_invs(i.material_no);let s=i.base_unit_qty-n;for(let e=0;e<this.invs.length&&0!=s;e++){let a=this.invs[e],o=this.inv_plans.find((t=>a["FStockLocId.FNumber"]==t["FStockLocId.FNumber"]&&a.FBatchNo==t.FBatchNo));if(o){let t=Math.min(a.FQty-o.FOpQTY,s);s-=t,await P.update(o.FID,{FOpQTY:o.FOpQTY+t})}else{let e=Math.min(a.FQty,s);s-=e;let o=new P({FOpType:"out",FStockId:t.state.cur_stock.FStockId,FStockLocNo:a["FStockLocId.FNumber"],FMaterialId:a.FMaterialId,FOpQTY:e,FBatchNo:a.FBatchNo,FBillNo:this.outbound_task.bill_no,FOpStaffNo:t.state.cur_staff.FNumber});await o.save()}}s>0&&(e=e||i.material_no)}n(),e?(this.set_plan_form(e),this.load_data(e),o({icon:"none",title:"该物料库存不足"})):(this.set_plan_form(a[0].material_no),this.load_data(a[0].material_no),o({title:"一键分配完毕"})),this.$logger.info(">>> 一键分配结束")},async load_data(t){await this.load_invs(t),await this.load_inv_plans(t),await this.load_inv_plans_ex(t),this._update_inv_status()},async load_invs(e){const a={FStockId:t.state.cur_stock.FStockId,"FMaterialId.FNumber":e,FQty_gt:0};return i({title:"Loading"}),G.query(a,{order:"FBatchNo ASC, FStockLocId.FNumber ASC"}).then((t=>(n(),this.invs=t.data,t.data)))},async load_inv_plans(e){const a={FStockId:t.state.cur_stock.FStockId,FBillNo:this.outbound_task.bill_no,"FMaterialId.FNumber":e,FOpType:"out"};return i({title:"Loading"}),P.query(a,{order:"FBatchNo ASC, FStockLocId.FNumber ASC"}).then((e=>{n(),this.inv_plans=e.data,this.inv_plans.forEach((e=>{"A"!=e.FDocumentStatu&&(e.status=t.state.document_status_dict[e.FDocumentStatu])}));let a=this.outbound_task.outbound_list.find((t=>t.material_no==this.plan_form.material_no));return this.plan_form.is_complete=this._sum_planned_qty()>=a.base_unit_qty,this._toggle_save_btn(),e.data}))},async load_inv_plans_ex(e){return i({title:"Loading"}),P.query({FStockId:t.state.cur_stock.FStockId,FBillNo_ne:this.outbound_task.bill_no,"FMaterialId.FNumber":e,FOpType_in:["out","mv","sub"],FDocumentStatu_in:["A","B"]},{order:"FCreateTime ASC"}).then((t=>{this.$logger.info(">>> 加载其余入库计划，完毕"),n(),this.inv_plans_ex=t.data}))},async submit_delete(t){if("A"==t.FDocumentStatu)return i({title:"Loading"}),P.delete([t.FID]).then((t=>{var e;n(),t.data.Result.ResponseStatus.IsSuccess?(V("delete"),this.$refs.inv_plan_swipe.closeAll(),this.load_data(this.plan_form.material_no)):o({icon:"none",title:null==(e=t.data.Result.ResponseStatus.Errors[0])?void 0:e.Message})}));this.$refs.inv_plan_swipe.closeAll(),o({icon:"error",title:"只能删除新增的计划"})},async submit_save(){if(this.plan_form.is_complete)o({icon:"none",title:"计划完毕"});else{if("check"==this.op_mode){if(0==this.invs.filter((t=>t.checked&&t.checked_qty>0)).length)return void o({icon:"none",title:"未勾选库存"});i({title:"Loading",mask:!0});for(var e=0;e<this.invs.length;e++){let a=this.invs[e];if(a.checked&&a.checked_qty>0){let e=new P({FOpType:"out",FStockId:t.state.cur_stock.FStockId,FStockLocNo:a["FStockLocId.FNumber"],FMaterialId:a.FMaterialId,FOpQTY:a.checked_qty,FBatchNo:a.FBatchNo,FBillNo:this.outbound_task.bill_no,FOpStaffNo:t.state.cur_staff.FNumber,FReceiver:this.outbound_task.receiver});await e.save()}}n(),V("success"),await this.load_inv_plans(this.plan_form.material_no),this._update_inv_status()}if("scan"==this.op_mode)try{await this.$refs.plan_form.validate(),this.outbound_task.outbound_list.find((t=>t.material_no==this.plan_form.material_no));let e=1*this.plan_form.op_qty;for(let a=0;a<this.invs.length&&0!=e;a++){let o=this.invs[a];if(o["FStockLocId.FNumber"]==this.plan_form.loc_no){let a=Math.min(o.FQty,e);e-=a;let i=new P({FOpType:"out",FStockId:t.state.cur_stock.FStockId,FStockLocNo:o["FStockLocId.FNumber"],FMaterialId:o.FMaterialId,FOpQTY:a,FBatchNo:o.FBatchNo,FBillNo:this.outbound_task.bill_no,FOpStaffNo:t.state.cur_staff.FNumber});await i.save()}}this.plan_form.loc_no="",this.plan_form.op_qty="",await this.load_inv_plans(this.plan_form.material_no),this._update_inv_status()}catch(a){}}},handle_scan_code(e){let a="";if(E(e)?a="material_no":Y(e)?a="loc_no":this.plan_form.material_no?this.plan_form.loc_no||(a="loc_no"):a="material_no","material_no"==a){let t=this.outbound_task.outbound_list.find((t=>t.material_no==e.trim()));t?(this.set_plan_form(t.material_no),this.load_data(t.material_no)):o({icon:"none",title:"单据中没有该物料"})}else if("loc_no"==a){let a=t.state.stock_locs.find((t=>t.FNumber==e.trim()));a?this.plan_form.loc_no=a.FNumber:o({icon:"none",title:"未知库位号"})}else o({icon:"none",title:"未知号码"})},inv_menu(){this.plan_form.material_id?e({itemList:["库存明细","物料详情"],success:t=>{0===t.tapIndex&&U(`/pages/operation/manage/inv_search?t=${this.plan_form.material_no}`),1===t.tapIndex&&U(`/pages/operation/material/show?id=${this.plan_form.material_id}`)}}):o({icon:"none",title:"请先选择物料"})},set_op_mode(t){"check"==t&&(this.op_mode="check",this.goods_nav.options[1].icon="checkbox",this.goods_nav.button_group[0].text="一键分配",this.goods_nav.button_group[0].backgroundColor="linear-gradient(90deg, #FFCD1E, #FF8A18)"),"scan"==t&&(this.op_mode="scan",this.goods_nav.options[1].icon="scan",this.goods_nav.button_group[0].text="扫码",this.goods_nav.button_group[0].backgroundColor="linear-gradient(90deg, #FE6035, #EF1224)")},set_plan_form(t){let e=this.outbound_task.outbound_list.find((e=>e.material_no==t));e?(this.plan_form.material_id=e.material_id,this.plan_form.material_no=e.material_no,this.plan_form.base_unit_name=e.base_unit_name,this.plan_form.decimal_unit=z(e.base_unit_name)):(this.plan_form.material_id="",this.plan_form.material_no="",this.plan_form.base_unit_name="Pcs",this.plan_form.decimal_unit=!1)},_toggle_save_btn(){this.plan_form.is_complete?this.goods_nav.button_group[1].backgroundColor="linear-gradient(90deg, #AAA, #606266)":this.goods_nav.button_group[1].backgroundColor="linear-gradient(90deg, #1E83FF, #0053B8)"},_sum_checked_qty(){return this.invs.map((t=>t.checked_qty||0)).concat([0]).reduce(((t,e)=>t+e))},_sum_planned_qty(){return this.inv_plans.map((t=>t.FOpQTY)).concat([0]).reduce(((t,e)=>t+e))},_update_inv_status(){this.invs.forEach((t=>{t.checked=!1,t.disabled=!1,t.checked_qty=0,t.planned_qty=0,this.inv_plans.forEach((e=>{e["FStockLocId.FNumber"]==t["FStockLocId.FNumber"]&&e.FBatchNo==t.FBatchNo&&["A","B"].includes(e.FDocumentStatu)&&(t.planned_qty+=e.FOpQTY,t.planned_qty>=t.FQty&&(t.disabled=!0))})),this.inv_plans_ex.forEach((e=>{e["FStockLocId.FNumber"]==t["FStockLocId.FNumber"]&&e.FBatchNo==t.FBatchNo&&["A","B"].includes(e.FDocumentStatu)&&(t.planned_qty+=e.FOpQTY,t.planned_qty>=t.FQty&&(t.disabled=!0))}))}))}}},[["render",function(t,e,a,o,i,n){const V=y,E=p,Y=S(s("uni-list-item"),q),U=S(s("uni-list"),I),z=S(s("uni-section"),N),R=S(s("uni-forms-item"),w),P=S(s("uni-data-picker"),C),G=S(s("uni-easyinput"),L),H=S(s("uni-forms"),x),J=S(s("uni-icons"),B),K=S(s("uni-swipe-action-item"),j),W=S(s("uni-swipe-action"),$),X=v,Z=S(s("uni-load-more"),Q),tt=S(s("uni-goods-nav"),O),et=g,at=S(s("uni-drawer"),T),ot=S(s("uni-number-box"),M),it=S(s("uni-popup-dialog"),A),nt=S(s("uni-popup"),D);return h(),l(m,null,[_(z,{type:"square",title:"新增计划明细","sub-title":i.outbound_task.bill_no,"sub-title-color":"#007aff"},{default:r((()=>[i.plan_form.material_no?(h(),c(U,{key:0},{default:r((()=>[(h(!0),l(m,null,f(i.outbound_task.outbound_list,((a,o)=>(h(),l(m,{key:o},[a.material_no==i.plan_form.material_no?(h(),c(Y,{key:0,"right-text":[a.base_unit_qty,a.base_unit_name].join(" "),onClick:e[0]||(e[0]=e=>t.$refs.material_drawer.open()),clickable:"","show-arrow":""},{body:r((()=>[_(E,{class:"uni-list-item__body"},{default:r((()=>[_(V,{class:"title"},{default:r((()=>[k(F(a.material_no),1)])),_:2},1024),_(E,{class:"note"},{default:r((()=>[_(E,null,{default:r((()=>[k("名称："+F(a.material_name),1)])),_:2},1024),_(E,null,{default:r((()=>[k("规格："+F(a.material_spec),1)])),_:2},1024),_(E,null,{default:r((()=>[k("出货仓库："),_(V,{class:"text-primary"},{default:r((()=>[k(F(a.stock_name),1)])),_:2},1024)])),_:2},1024),_(E,null,{default:r((()=>[k("未出库数量（仅供参考）："+F(a.remain_out_qty),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["right-text"])):d("",!0)],64)))),128))])),_:1})):(h(),c(U,{key:1},{default:r((()=>[_(Y,{"show-extra-icon":!0,"extra-icon":{color:"#007bff",size:"24",type:"list"},title:"点击选择物料",onClick:e[1]||(e[1]=e=>t.$refs.material_drawer.open()),clickable:"","show-arrow":""})])),_:1}))])),_:1},8,["sub-title"]),"scan"==i.op_mode?(h(),c(E,{key:0,class:"container"},{default:r((()=>[_(H,{ref:"plan_form",model:i.plan_form,rules:i.plan_form_rules,labelWidth:"80px"},{default:r((()=>[_(R,{name:"material_no",style:{height:"0"}}),_(R,{label:"库位号",name:"loc_no",required:""},{default:r((()=>[_(P,{modelValue:i.plan_form.loc_no,"onUpdate:modelValue":e[2]||(e[2]=t=>i.plan_form.loc_no=t),localdata:n.stock_loc_opts,split:"-","popup-title":"请选择库位"},null,8,["modelValue","localdata"])])),_:1}),_(R,{label:"下架数量",name:"op_qty",required:""},{default:r((()=>[_(G,{modelValue:i.plan_form.op_qty,"onUpdate:modelValue":e[3]||(e[3]=t=>i.plan_form.op_qty=t),type:"number"},{right:r((()=>[_(V,{class:"easyinput-suffix-text"},{default:r((()=>[k(F(i.plan_form.base_unit_name),1)])),_:1})])),_:1},8,["modelValue"])])),_:1}),_(R,{label:"备注",name:"remark"},{default:r((()=>[_(G,{modelValue:i.plan_form.remark,"onUpdate:modelValue":e[4]||(e[4]=t=>i.plan_form.remark=t),trim:"both"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})):d("",!0),i.inv_plans.length?(h(),c(z,{key:1,type:"square",title:"当前计划明细","sub-title":"app-plus"==t.$store.state.device_type?"左滑可删除":"",class:u("scan"==i.op_mode?"above-uni-goods-nav":"")},{right:r((()=>[_(E,{class:"uni-section__right"},{default:r((()=>[_(E,null,{default:r((()=>[k(" 已计划 "),_(V,{class:"sum_qty"},{default:r((()=>[k(F(n._sum_planned_qty()),1)])),_:1}),k(" "+F(i.plan_form.base_unit_name),1)])),_:1})])),_:1})])),default:r((()=>[_(W,{ref:"inv_plan_swipe"},{default:r((()=>[(h(!0),l(m,null,f(i.inv_plans,((e,a)=>(h(),c(K,{key:a,threshold:60,"right-options":i.swipe_options,onClick:t=>n.swipe_action_click(t,e)},{default:r((()=>[_(Y,{"show-extra-icon":!0,"extra-icon":{color:"#4cd964",size:"24",type:"arrow-down"},title:e["FStockLocId.FNumber"],note:`批次：${e.FBatchNo}, 计划新建时间：${n.formatDate(e.FCreateTime,"yyyy-MM-dd hh:mm:ss")}`},{footer:r((()=>[_(E,{class:"uni-list-item__foot",style:{"flex-direction":"row"}},{default:r((()=>[_(E,null,{default:r((()=>[_(E,{class:"op_qty"},{default:r((()=>[k(F(e.FOpQTY)+" "+F(e["FStockUnitId.FName"]),1)])),_:2},1024),_(E,{class:"status"},{default:r((()=>[k(F(e.status),1)])),_:2},1024)])),_:2},1024),"h5"!=t.$store.state.device_type||e.status?d("",!0):(h(),c(E,{key:0},{default:r((()=>[_(J,{type:"trash",size:"24",color:"#dd524d",onClick:t=>n.submit_delete(e),class:"uni-ml-5"},null,8,["onClick"])])),_:2},1024))])),_:2},1024)])),_:2},1032,["title","note"])])),_:2},1032,["right-options","onClick"])))),128))])),_:1},512)])),_:1},8,["sub-title","class"])):d("",!0),"check"==i.op_mode?(h(),c(z,{key:2,title:"库存信息","sub-title":"点击勾选的行，修改选择的库存数",class:"above-uni-goods-nav"},{decoration:r((()=>[_(E,{class:"uni-section__decoration"},{default:r((()=>[_(J,{type:"search",size:"30",color:"#007aff",onClick:n.inv_menu},null,8,["onClick"])])),_:1})])),right:r((()=>[_(E,{class:"uni-section__right"},{default:r((()=>[_(E,null,{default:r((()=>[k(" 已选择 "),_(V,{class:"sum_qty"},{default:r((()=>[k(F(n._sum_checked_qty()),1)])),_:1}),k(" "+F(i.plan_form.base_unit_name),1)])),_:1})])),_:1})])),default:r((()=>[_(U,null,{default:r((()=>[(h(!0),l(m,null,f(i.invs,((t,e)=>(h(),c(Y,{key:e,title:t["FStockLocId.FNumber"],note:`批次：${t.FBatchNo}`,"right-text":[t.FQty,t["FStockUnitId.FName"]].join(" "),onClick:e=>n.edit_checked_qty(t),clickable:"","show-arrow":t.checked},{header:r((()=>[_(E,{class:"uni-list-item__head"},{default:r((()=>[_(X,{checked:t.checked,disabled:t.disabled,onClick:n.checkbox_click,"data-id":t.FID},null,8,["checked","disabled","onClick","data-id"])])),_:2},1024)])),footer:r((()=>[_(E,{class:"uni-list-item__foot"},{default:r((()=>[_(V,{class:"op_qty"},{default:r((()=>[t.planned_qty?(h(),l(m,{key:0},[k("("+F(t.FQty-t.planned_qty)+")",1)],64)):d("",!0),k(" "+F(t.FQty)+" "+F(t["FStockUnitId.FName"]),1)])),_:2},1024),t.checked_qty?(h(),c(V,{key:0,class:"status"},{default:r((()=>[k("-"+F(t.checked_qty)+" "+F(t["FStockUnitId.FName"]),1)])),_:2},1024)):d("",!0)])),_:2},1024)])),_:2},1032,["title","note","right-text","onClick","show-arrow"])))),128))])),_:1}),0==i.invs.length?(h(),c(Z,{key:0,status:"nomore","content-text":{contentnomore:"没有相关数据"}})):d("",!0)])),_:1})):d("",!0),_(E,{class:"uni-goods-nav-wrapper"},{default:r((()=>[_(tt,{options:i.goods_nav.options,"button-group":i.goods_nav.button_group,fill:t.$store.state.goods_nav_fill,onClick:n.goods_nav_click,onButtonClick:n.goods_nav_button_click},null,8,["options","button-group","fill","onClick","onButtonClick"])])),_:1}),_(at,{ref:"material_drawer",width:t.$store.state.drawer_width},{default:r((()=>[_(et,{"scroll-y":"",style:{height:"100%"},onTouchmove:e[6]||(e[6]=b((()=>{}),["stop"]))},{default:r((()=>[_(z,{title:"出库物料列表",type:"square","sub-title":"点击切换当前物料"},{right:r((()=>[_(E,{class:"uni-section__right"},{default:r((()=>[_(J,{type:"closeempty",size:"20",color:"#333",onClick:e[5]||(e[5]=e=>t.$refs.material_drawer.close())})])),_:1})])),default:r((()=>[_(U,null,{default:r((()=>[(h(!0),l(m,null,f(i.outbound_task.outbound_list,((e,a)=>(h(),l(m,{key:a},[e.stock_id==t.$store.state.cur_stock.FStockId?(h(),c(Y,{key:0,"right-text":[e.base_unit_qty,e.base_unit_name].join(" "),onClick:t=>n.material_no_click(e.material_no),clickable:"","show-arrow":""},{body:r((()=>[_(E,{class:"uni-list-item__body"},{default:r((()=>[_(E,{class:"title"},{default:r((()=>[this.plan_form.material_no==e.material_no?(h(),c(J,{key:0,type:"checkbox-filled",color:"#007aff"})):d("",!0),k(" "+F(e.material_no),1)])),_:2},1024),_(E,{class:"note"},{default:r((()=>[_(E,null,{default:r((()=>[k("名称："+F(e.material_name),1)])),_:2},1024),_(E,null,{default:r((()=>[k("规格："+F(e.material_spec),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["right-text","onClick"])):d("",!0)],64)))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["width"]),_(nt,{ref:"checked_qty_dialog",type:"dialog"},{default:r((()=>[_(it,{title:"修改选择的库存数",type:"error","show-close":!1},{default:r((()=>[_(E,{class:"plan-form"},{default:r((()=>[_(ot,{modelValue:i.inv_editing.checked_qty,"onUpdate:modelValue":e[7]||(e[7]=t=>i.inv_editing.checked_qty=t),min:0,max:i.inv_editing.FQty-i.inv_editing.planned_qty,onChange:n.change_checked_qty},null,8,["modelValue","max","onChange"])])),_:1})])),_:1})])),_:1},512)],64)}],["__scopeId","data-v-7061577d"]]);export{W as default};
