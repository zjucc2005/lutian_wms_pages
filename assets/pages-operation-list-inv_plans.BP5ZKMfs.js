import{P as e,v as a,s as t,c as l,q as o,d as r,w as i,e as s,F as _,o as n,f as d,u,i as m,t as c,g as p,k as f}from"./index-DGWOUQdM.js";import{_ as h,a as y,b as F}from"./uni-td.zb0VuMhS.js";import{r as g}from"./uni-app.es.DKZsoyMd.js";import{_ as b}from"./uni-table.6E3sqkPu.js";import{_ as k}from"./uni-icons.LDhtL0t0.js";import{_ as v}from"./uni-list-item.BnynrAPo.js";import{_ as T}from"./uni-list.Kn4QrsAX.js";import{_ as V}from"./uni-load-more.Dv1TB_Bm.js";import{_ as j}from"./uni-fab.CP0RcAu9.js";import{_ as O}from"./uni-datetime-picker.CztCdWST.js";import{_ as I,a as N}from"./uni-forms.BvQoUrI-.js";import{_ as x}from"./uni-data-select.D2CEQhkp.js";import{_ as w}from"./uni-easyinput.l7FUzy_X.js";import{_ as M,a as S}from"./uni-popup.u0O5NyhE.js";import{f as C}from"./date-format.Dm3Q97cL.js";import"./k3cloudapi.CbDqg_He.js";import{a as D}from"./stock_loc.C36uFwb2.js";import"./inv_log.OihDyY2r.js";import{_ as U}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-badge._gn3hy42.js";const R=U({data:()=>({inv_plans:[],search_form:{create_time_ge:"",create_time_le:"",material_no:"",material_name:"",material_spec:"",bill_no:""},page:1,per_page:25,load_more_status:"more",op_type_dict:D.FOpTypeEnum,fab_content:[{iconPath:"/static/icon/cc_search.png",selectedIconPath:"/static/icon/cc_search_active.png",text:"搜索",active:!1},{iconPath:"/static/icon/cc_gotop.png",selectedIconPath:"/static/icon/cc_gotop_active.png",text:"返回顶部",active:!1}]}),onPullDownRefresh(){this.reload_inv_plans(),e()},onReachBottom(){this.load_more()},mounted(){this.load_inv_plans()},computed:{op_type_options(){return Object.getOwnPropertyNames(this.op_type_dict).map((e=>({value:e,text:this.op_type_dict[e]})))}},methods:{formatDate:C,fab_trigger(e){this.$logger.info("this.$data",this.$data),0===e.index&&this.$refs.search_dialog.open(),1===e.index&&a({scrollTop:0})},load_more(){"nomore"!=this.load_more_status&&(this.page+=1,this.load_inv_plans())},reload_inv_plans(){this.inv_plans=[],this.load_more_status="more",this.page=1,this.load_inv_plans()},search_dialog_close(){this.$refs.search_dialog.close()},search_dialog_confirm(){this.reload_inv_plans(),this.search_dialog_close()},async load_inv_plans(){let e={FStockId:t.state.cur_stock.FStockId};this.search_form.create_time_ge&&(e.FCreateTime_ge=this.search_form.create_time_ge),this.search_form.create_time_le&&(e.FCreateTime_le=this.search_form.create_time_le),this.search_form.op_type&&(e.FOpType=this.search_form.op_type),this.search_form.material_no&&(e["FMaterialId.FNumber_lk"]=this.search_form.material_no),this.search_form.material_name&&(e.FMaterialName_lk=this.search_form.material_name),this.search_form.material_spec&&(e.FModel_lk=this.search_form.material_spec),this.search_form.bill_no&&(e.FBillNo_lk=this.search_form.bill_no),this.search_form.receiver&&(e.FReceiver_lk=this.search_form.receiver);let a={page:this.page,per_page:this.per_page,order:"FID DESC"};this.load_more_status="loading",D.query(e,a).then((e=>{this.load_more_status=e.data.length<this.per_page?"nomore":"more",e.data.forEach((e=>this.inv_plans.push(e)))}))}}},[["render",function(e,a,t,C,D,U){const R=g(l("uni-th"),h),$=g(l("uni-tr"),y),P=g(l("uni-td"),F),B=m,L=f,q=g(l("uni-table"),b),E=g(l("uni-icons"),k),Q=g(l("uni-list-item"),v),Y=g(l("uni-list"),T),z=g(l("uni-load-more"),V),A=g(l("uni-fab"),j),G=g(l("uni-datetime-picker"),O),H=g(l("uni-forms-item"),I),J=g(l("uni-data-select"),x),K=g(l("uni-easyinput"),w),W=g(l("uni-forms"),N),X=g(l("uni-popup-dialog"),M),Z=g(l("uni-popup"),S);return n(),o(_,null,["h5"===e.$store.state.screen_type?(n(),r(q,{key:0,ref:"table",border:"",stripe:""},{default:i((()=>[s($,null,{default:i((()=>[s(R,{align:"center",width:"160"},{default:i((()=>[d("时间")])),_:1}),s(R,{align:"center",width:"80"},{default:i((()=>[d("操作类型")])),_:1}),s(R,{align:"center",width:"60"},{default:i((()=>[d("数量")])),_:1}),s(R,{align:"center",width:"80"},{default:i((()=>[d("计量单位")])),_:1}),s(R,{align:"center",width:"160"},{default:i((()=>[d("物料编码")])),_:1}),s(R,{align:"center",width:"200"},{default:i((()=>[d("物料名称")])),_:1}),s(R,{align:"center"},{default:i((()=>[d("规格型号")])),_:1}),s(R,{align:"center",width:"80"},{default:i((()=>[d("批次")])),_:1}),s(R,{align:"center",width:"120"},{default:i((()=>[d("库位")])),_:1}),s(R,{align:"center",width:"120"},{default:i((()=>[d("目标库位")])),_:1}),s(R,{align:"center"},{default:i((()=>[d("单据编号")])),_:1}),s(R,{align:"center",width:"80"},{default:i((()=>[d("收货人")])),_:1}),s(R,{align:"center"},{default:i((()=>[d("备注")])),_:1}),s(R,{align:"center",width:"120"},{default:i((()=>[d("操作员工编号")])),_:1}),s(R,{align:"center",width:"80"},{default:i((()=>[d("状态")])),_:1})])),_:1}),(n(!0),o(_,null,u(D.inv_plans,((a,t)=>(n(),r($,{key:t},{default:i((()=>[s(P,null,{default:i((()=>[d(c(U.formatDate(a.FCreateTime,"yyyy-MM-dd hh:mm:ss")),1)])),_:2},1024),s(P,null,{default:i((()=>[["in","add"].includes(a.FOpType)?(n(),r(B,{key:0,class:"text-error"},{default:i((()=>[d(c(D.op_type_dict[a.FOpType]),1)])),_:2},1024)):p("",!0),["out","sub"].includes(a.FOpType)?(n(),r(B,{key:1,class:"text-primary"},{default:i((()=>[d(c(D.op_type_dict[a.FOpType]),1)])),_:2},1024)):p("",!0),["mv"].includes(a.FOpType)?(n(),r(B,{key:2},{default:i((()=>[d(c(D.op_type_dict[a.FOpType]),1)])),_:2},1024)):p("",!0)])),_:2},1024),s(P,null,{default:i((()=>[d(c(a.FOpQTY),1)])),_:2},1024),s(P,null,{default:i((()=>[d(c(a["FStockUnitId.FName"]),1)])),_:2},1024),s(P,null,{default:i((()=>[d(c(a["FMaterialId.FNumber"]),1)])),_:2},1024),s(P,null,{default:i((()=>[d(c(a["FMaterialId.FName"]),1)])),_:2},1024),s(P,null,{default:i((()=>[d(c(a["FMaterialId.FSpecification"]),1)])),_:2},1024),s(P,null,{default:i((()=>[d(c(a.FBatchNo),1)])),_:2},1024),s(P,null,{default:i((()=>[d(c(a["FStockLocId.FNumber"]),1)])),_:2},1024),s(P,null,{default:i((()=>[s(L,{class:"text-primary"},{default:i((()=>[d(c(a["FDestStockLocId.FNumber"]),1)])),_:2},1024)])),_:2},1024),s(P,null,{default:i((()=>[d(c(a.FBillNo),1)])),_:2},1024),s(P,null,{default:i((()=>[d(c(a.FReceiver),1)])),_:2},1024),s(P,null,{default:i((()=>[d(c(a.FRemark),1)])),_:2},1024),s(P,null,{default:i((()=>[d(c(a.FOpStaffNo),1)])),_:2},1024),s(P,null,{default:i((()=>[s(L,{class:"text-primary"},{default:i((()=>[d(c(e.$store.state.document_status_dict[a.FDocumentStatu]),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},512)):(n(),r(Y,{key:1},{default:i((()=>[(n(!0),o(_,null,u(D.inv_plans,((a,t)=>(n(),r(Q,{key:t},{body:i((()=>[s(B,{class:"uni-list-item__body"},{default:i((()=>[s(B,{class:"title"},{default:i((()=>[d(c(a["FMaterialId.FNumber"])+" / "+c(a["FMaterialId.FName"]),1)])),_:2},1024),s(B,{class:"note"},{default:i((()=>{var e,t,l;return[s(B,null,{default:i((()=>[d("规格："+c(a["FMaterialId.FSpecification"]),1)])),_:2},1024),s(B,null,{default:i((()=>[d(" 库位："),s(L,{class:"text-default"},{default:i((()=>[d(c(a["FStockLocId.FNumber"]),1)])),_:2},1024),"mv"==a.FOpType?(n(),o(_,{key:0},[s(E,{type:"redo",color:"#007bff"}),s(L,{class:"text-primary uni-ml-2"},{default:i((()=>[d(c(a["FDestStockLocId.FNumber"]),1)])),_:2},1024)],64)):p("",!0),s(L,{class:"uni-ml-5"},{default:i((()=>[d("批次："+c(a.FBatchNo),1)])),_:2},1024)])),_:2},1024),(null==(e=a.FBillNo)?void 0:e.trim())?(n(),r(B,{key:0},{default:i((()=>[d("单据："+c(a.FBillNo),1)])),_:2},1024)):p("",!0),(null==(t=a.FReceiver)?void 0:t.trim())?(n(),r(B,{key:1},{default:i((()=>[d("收货人："+c(a.FReceiver),1)])),_:2},1024)):p("",!0),(null==(l=a.FRemark)?void 0:l.trim())?(n(),r(B,{key:2},{default:i((()=>[d("备注："+c(a.FRemark),1)])),_:2},1024)):p("",!0),s(B,null,{default:i((()=>[d("时间："+c(U.formatDate(a.FCreateTime,"yyyy-MM-dd hh:mm:ss")),1)])),_:2},1024)]})),_:2},1024)])),_:2},1024)])),footer:i((()=>[s(B,{class:"uni-list-item__foot"},{default:i((()=>[["in","add"].includes(a.FOpType)?(n(),r(B,{key:0,class:"text-error"},{default:i((()=>[d(c(D.op_type_dict[a.FOpType]),1)])),_:2},1024)):p("",!0),["out","sub"].includes(a.FOpType)?(n(),r(B,{key:1,class:"text-primary"},{default:i((()=>[d(c(D.op_type_dict[a.FOpType]),1)])),_:2},1024)):p("",!0),["mv"].includes(a.FOpType)?(n(),r(B,{key:2},{default:i((()=>[d(c(D.op_type_dict[a.FOpType]),1)])),_:2},1024)):p("",!0),s(B,null,{default:i((()=>[d(c(a.FOpQTY)+" "+c(a["FStockUnitId.FName"]),1)])),_:2},1024),s(B,{class:"text-primary"},{default:i((()=>[d(c(e.$store.state.document_status_dict[a.FDocumentStatu]),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})),s(z,{status:D.load_more_status,onClickLoadMore:U.load_more},null,8,["status","onClickLoadMore"]),s(A,{ref:"fab",content:D.fab_content,onTrigger:U.fab_trigger,show:""},null,8,["content","onTrigger"]),s(Z,{ref:"search_dialog",type:"dialog"},{default:i((()=>[s(X,{type:"info",title:"搜索条件",cancelText:"关闭",onClose:U.search_dialog_close,onConfirm:U.search_dialog_confirm,"before-close":!0,style:{width:"360px"}},{default:i((()=>[s(B,{class:"search-form"},{default:i((()=>[s(W,{ref:"search_form",model:D.search_form},{default:i((()=>[s(H,{label:"开始时间"},{default:i((()=>[s(G,{type:"date",modelValue:D.search_form.create_time_ge,"onUpdate:modelValue":a[0]||(a[0]=e=>D.search_form.create_time_ge=e)},null,8,["modelValue"])])),_:1}),s(H,{label:"结束时间"},{default:i((()=>[s(G,{type:"date",modelValue:D.search_form.create_time_le,"onUpdate:modelValue":a[1]||(a[1]=e=>D.search_form.create_time_le=e)},null,8,["modelValue"])])),_:1}),s(H,{label:"操作类型"},{default:i((()=>[s(J,{modelValue:D.search_form.op_type,"onUpdate:modelValue":a[2]||(a[2]=e=>D.search_form.op_type=e),localdata:U.op_type_options},null,8,["modelValue","localdata"])])),_:1}),s(H,{label:"物料编码"},{default:i((()=>[s(K,{modelValue:D.search_form.material_no,"onUpdate:modelValue":a[3]||(a[3]=e=>D.search_form.material_no=e)},null,8,["modelValue"])])),_:1}),s(H,{label:"名称"},{default:i((()=>[s(K,{modelValue:D.search_form.material_name,"onUpdate:modelValue":a[4]||(a[4]=e=>D.search_form.material_name=e)},null,8,["modelValue"])])),_:1}),s(H,{label:"规格"},{default:i((()=>[s(K,{modelValue:D.search_form.material_spec,"onUpdate:modelValue":a[5]||(a[5]=e=>D.search_form.material_spec=e)},null,8,["modelValue"])])),_:1}),s(H,{label:"单据编号"},{default:i((()=>[s(K,{modelValue:D.search_form.bill_no,"onUpdate:modelValue":a[6]||(a[6]=e=>D.search_form.bill_no=e)},null,8,["modelValue"])])),_:1}),s(H,{label:"收货人"},{default:i((()=>[s(K,{modelValue:D.search_form.receiver,"onUpdate:modelValue":a[7]||(a[7]=e=>D.search_form.receiver=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["onClose","onConfirm"])])),_:1},512)],64)}],["__scopeId","data-v-7650f938"]]);export{R as default};
