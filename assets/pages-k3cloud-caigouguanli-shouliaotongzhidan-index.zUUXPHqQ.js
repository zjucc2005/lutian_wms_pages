import{P as e,v as a,c as l,q as t,d as i,w as r,e as o,F as s,o as _,f as d,u as n,C as m,i as u,t as c}from"./index-DsK9pIyj.js";import{_ as f,a as h,b as p}from"./uni-td.DKOxbdh1.js";import{r as b}from"./uni-app.es.CSK8ITuj.js";import{_ as g}from"./uni-table.BXeOwSLO.js";import{_ as F}from"./uni-list-item.BkmqxiQh.js";import{_ as y}from"./uni-list.dJf-6p1_.js";import{_ as I}from"./uni-fab.b1ZtjMUn.js";import{_ as v}from"./uni-easyinput.BfazFYzq.js";import{_ as x,a as j}from"./uni-forms.DoSYlyoS.js";import{_ as V,a as N}from"./uni-row.CMhOpWuA.js";import{_ as w,a as k}from"./uni-popup.CPWlX1tX.js";import{t as M}from"./index.uHoH2c2-.js";import"./k3cloudapi.PCDjx1SF.js";import"./stock_loc.Bj3C3Byx.js";import"./inv_log.D0BShjlW.js";import{P}from"./pur_receive_bill.CdExXIYK.js";import{f as D}from"./date-format.Dm3Q97cL.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-datetime-picker.Bsu03if5.js";import"./uni-icons.DRoE6XYp.js";import"./uni-badge.CO78OwkC.js";const C=S({data:()=>({receive_bills:[],search_form:{bill_no:"",demand_bill_no:"",demander:"",supplier:"",material_no:"",material_name:"",material_spec:""},page:1,per_page:100,load_more_status:"more",fab_content:[{iconPath:"/static/icon/cc_search.png",selectedIconPath:"/static/icon/cc_search_active.png",text:"搜索",active:!1},{iconPath:"/static/icon/cc_gotop.png",selectedIconPath:"/static/icon/cc_gotop_active.png",text:"返回顶部",active:!1}]}),onPullDownRefresh(){this.reload_receive_bills(),e()},onReachBottom(){this.load_more()},mounted(){this.load_receive_bills()},methods:{truncate:M,formatDate:D,async load_receive_bills(){let e={},a={page:this.page,per_page:this.per_page,order:"FID DESC"};this.search_form.bill_no&&(e.FBillNo_lk=this.search_form.bill_no),this.search_form.demand_bill_no&&(e.F_PAEZ_Text_lk=this.search_form.demand_bill_no),this.search_form.demander&&(e["FDemanderId.FName_lk"]=this.search_form.demander),this.search_form.supplier&&(e["FSupplierId.FName_lk"]=this.search_form.supplier),this.search_form.material_no&&(e["FMaterialId.FNumber_lk"]=this.search_form.material_no),this.search_form.material_name&&(e["FMaterialId.FName_lk"]=this.search_form.material_name),this.search_form.material_spec&&(e["FMaterialId.FSpecification_lk"]=this.search_form.material_spec),this.load_more_status="loading",P.query(e,a).then((e=>{this.load_more_status=e.data.length<this.per_page?"nomore":"more",e.data.forEach((e=>this.receive_bills.push(e)))}))},reload_receive_bills(){this.receive_bills=[],this.load_more_status="more",this.page=1,this.load_receive_bills()},fab_trigger(e){0===e.index&&this.$refs.search_dialog.open(),1===e.index&&a({scrollTop:0})},load_more(){"nomore"!=this.load_more_status&&(this.page+=1,this.load_receive_bills())},search_dialog_close(){this.$refs.search_dialog.close()},search_dialog_confirm(){this.reload_receive_bills(),this.search_dialog_close()}}},[["render",function(e,a,M,P,D,S){const C=b(l("uni-th"),f),U=b(l("uni-tr"),h),T=b(l("uni-td"),p),A=b(l("uni-table"),g),E=u,$=b(l("uni-list-item"),F),B=b(l("uni-list"),y),R=b(l("uni-fab"),I),Z=b(l("uni-easyinput"),v),q=b(l("uni-forms-item"),x),W=b(l("uni-col"),V),Q=b(l("uni-row"),N),z=b(l("uni-forms"),j),G=b(l("uni-popup-dialog"),w),H=b(l("uni-popup"),k);return _(),t(s,null,["h5"===e.$store.state.screen_type?(_(),i(A,{key:0,ref:"table",border:"",stripe:""},{default:r((()=>[o(U,null,{default:r((()=>[o(C,{align:"center",width:"120"},{default:r((()=>[d("单据编号")])),_:1}),o(C,{align:"center",width:"120"},{default:r((()=>[d("创建日期")])),_:1}),o(C,{align:"center",width:"150"},{default:r((()=>[d("供应商")])),_:1}),o(C,{align:"center",width:"80"},{default:r((()=>[d("采购员")])),_:1}),o(C,{align:"center",width:"160"},{default:r((()=>[d("物料编码")])),_:1}),o(C,{align:"center",width:"200"},{default:r((()=>[d("物料名称")])),_:1}),o(C,{align:"center"},{default:r((()=>[d("规格型号")])),_:1}),o(C,{align:"center",width:"80"},{default:r((()=>[d("交货数量")])),_:1}),o(C,{align:"center",width:"80"},{default:r((()=>[d("收料单位")])),_:1}),o(C,{align:"center",width:"120"},{default:r((()=>[d("需求单据编号")])),_:1}),o(C,{align:"center"},{default:r((()=>[d("仓库")])),_:1})])),_:1}),(_(!0),t(s,null,n(D.receive_bills,((e,a)=>(_(),i(U,{key:a},{default:r((()=>[o(T,null,{default:r((()=>[d(c(e.FBillNo),1)])),_:2},1024),o(T,null,{default:r((()=>[d(c(S.formatDate(e.FCreateDate,"yyyy-MM-dd")),1)])),_:2},1024),o(T,{title:e["FSupplierId.FName"]},{default:r((()=>[d(c(S.truncate(e["FSupplierId.FName"],8)),1)])),_:2},1032,["title"]),o(T,null,{default:r((()=>[d(c(e["FPurchaserId.FName"]),1)])),_:2},1024),o(T,null,{default:r((()=>[d(c(e["FMaterialId.FNumber"]),1)])),_:2},1024),o(T,null,{default:r((()=>[d(c(e["FMaterialId.FName"]),1)])),_:2},1024),o(T,null,{default:r((()=>[d(c(e["FMaterialId.FSpecification"]),1)])),_:2},1024),o(T,null,{default:r((()=>[d(c(e.FActReceiveQty),1)])),_:2},1024),o(T,null,{default:r((()=>[d(c(e["FUnitId.FName"]),1)])),_:2},1024),o(T,null,{default:r((()=>[d(c(e.F_PAEZ_Text),1)])),_:2},1024),o(T,null,{default:r((()=>[d(c(e["FStockId.FName"]),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1},512)):(_(),i(B,{key:1},{default:r((()=>[(_(!0),t(s,null,n(D.receive_bills,((e,a)=>(_(),i($,{key:a},{body:r((()=>[o(E,{class:"uni-list-item__body"},{default:r((()=>[o(E,{class:"title"},{default:r((()=>[d(c(e.FBillNo)+" / "+c(e.F_PAEZ_Text),1)])),_:2},1024),o(E,{class:"note"},{default:r((()=>[o(E,null,{default:r((()=>[d("供应商："+c(e["FSupplierId.FName"]),1)])),_:2},1024),o(E,null,{default:r((()=>[d("编码："+c(e["FMaterialId.FNumber"]),1)])),_:2},1024),o(E,null,{default:r((()=>[d("名称："+c(e["FMaterialId.FName"]),1)])),_:2},1024),o(E,null,{default:r((()=>[d("规格："+c(e["FMaterialId.FSpecification"]),1)])),_:2},1024),o(E,null,{default:r((()=>[d("创建日期："+c(S.formatDate(e.FCreateDate,"yyyy-MM-dd")),1)])),_:2},1024),o(E,null,{default:r((()=>[d("采购员："+c(e["FPurchaserId.FName"]),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),footer:r((()=>[o(E,{class:"uni-list-item__foot"},{default:r((()=>[o(E,null,{default:r((()=>[d(c(e.FActReceiveQty)+" "+c(e["FUnitId.FName"]),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})),o(R,{ref:"fab",content:D.fab_content,onTrigger:S.fab_trigger,show:""},null,8,["content","onTrigger"]),o(H,{ref:"search_dialog",type:"dialog"},{default:r((()=>[o(G,{type:"info",title:"搜索条件",cancelText:"关闭",onClose:S.search_dialog_close,onConfirm:S.search_dialog_confirm,"before-close":!0,style:m({width:e.$store.state.system_info.windowWidth-20+"px",minWidth:"360px",maxWidth:"1200px"})},{default:r((()=>[o(E,{class:"search-form"},{default:r((()=>[o(z,{ref:"search_form",model:D.search_form,"label-width":100},{default:r((()=>[o(Q,{gutter:15},{default:r((()=>[o(W,{md:8,sm:12,xs:24},{default:r((()=>[o(q,{label:"单据编号"},{default:r((()=>[o(Z,{modelValue:D.search_form.bill_no,"onUpdate:modelValue":a[0]||(a[0]=e=>D.search_form.bill_no=e)},null,8,["modelValue"])])),_:1})])),_:1}),o(W,{md:8,sm:12,xs:24},{default:r((()=>[o(q,{label:"需求单据编号"},{default:r((()=>[o(Z,{modelValue:D.search_form.demand_bill_no,"onUpdate:modelValue":a[1]||(a[1]=e=>D.search_form.demand_bill_no=e)},null,8,["modelValue"])])),_:1})])),_:1}),o(W,{md:8,sm:12,xs:24},{default:r((()=>[o(q,{label:"需求人"},{default:r((()=>[o(Z,{modelValue:D.search_form.demander,"onUpdate:modelValue":a[2]||(a[2]=e=>D.search_form.demander=e)},null,8,["modelValue"])])),_:1})])),_:1}),o(W,{md:8,sm:12,xs:24},{default:r((()=>[o(q,{label:"供应商"},{default:r((()=>[o(Z,{modelValue:D.search_form.supplier,"onUpdate:modelValue":a[3]||(a[3]=e=>D.search_form.supplier=e)},null,8,["modelValue"])])),_:1})])),_:1}),o(W,{md:8,sm:12,xs:24},{default:r((()=>[o(q,{label:"物料编码"},{default:r((()=>[o(Z,{modelValue:D.search_form.material_no,"onUpdate:modelValue":a[4]||(a[4]=e=>D.search_form.material_no=e)},null,8,["modelValue"])])),_:1})])),_:1}),o(W,{md:8,sm:12,xs:24},{default:r((()=>[o(q,{label:"物料名称"},{default:r((()=>[o(Z,{modelValue:D.search_form.material_name,"onUpdate:modelValue":a[5]||(a[5]=e=>D.search_form.material_name=e)},null,8,["modelValue"])])),_:1})])),_:1}),o(W,{md:8,sm:12,xs:24},{default:r((()=>[o(q,{label:"规格型号"},{default:r((()=>[o(Z,{modelValue:D.search_form.material_spec,"onUpdate:modelValue":a[6]||(a[6]=e=>D.search_form.material_spec=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["onClose","onConfirm","style"])])),_:1},512)],64)}],["__scopeId","data-v-e3585036"]]);export{C as default};
