import{P as e,s as t,v as a,c as o,q as s,d as l,w as i,e as r,F as _,o as d,u as n,C as c,i as m,f as u,t as f,L as h}from"./index-DjNCOAYS.js";import{_ as p}from"./uni-table.BDa3YjjO.js";import{r as g}from"./uni-app.es.Ch8d-HxS.js";import{_ as y}from"./uni-list-item.Dm5ieig7.js";import{_ as v}from"./uni-list.p66-62vf.js";import{_ as b}from"./uni-load-more.BRFWIZFV.js";import{_ as x}from"./uni-fab.s85DDHG0.js";import{_ as j}from"./uni-datetime-picker.CBY8aiXR.js";import{_ as F,a as k}from"./uni-forms.TRwwN9L2.js";import{_ as w,a as C}from"./uni-row.CNBrzn_m.js";import{_ as D}from"./uni-easyinput.C9ecXEkH.js";import{_ as V}from"./uni-data-select.pvSOozBk.js";import{_ as I,a as P}from"./uni-popup.BroRa8y9.js";import{t as $,l as S}from"./index.uJty1kg6.js";import"./k3cloudapi.B_cIKn_3.js";import"./stock_loc.GXV191SF.js";import"./inv_log.B3mwqkWu.js";import{S as T}from"./sal_delivery_notice.DzsIFhe0.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{f as E}from"./date-format.Dm3Q97cL.js";import"./uni-icons.CZYyaTue.js";import"./uni-badge.DRmKIMEp.js";const M=A({data:()=>({delivery_notices:[],search_form:{date:"",bill_no:"",receiver:"",close_status:""},page:1,per_page:100,load_more_status:"more",fab_content:[{iconPath:"/static/icon/cc_search.png",selectedIconPath:"/static/icon/cc_search_active.png",text:"搜索",active:!1},{iconPath:"/static/icon/cc_gotop.png",selectedIconPath:"/static/icon/cc_gotop_active.png",text:"返回顶部",active:!1}]}),onPullDownRefresh(){this.reload_delivery_notices(),e()},onReachBottom(){this.load_more()},mounted(){this.load_delivery_notices()},methods:{truncate:$,formatDate:E,async load_delivery_notices(){let e={FDocumentStatus:"C",FDeliveryOrgId:t.state.cur_stock.FUseOrgId},a={page:this.page,per_page:this.per_page,order:"FID DESC"};this.search_form.date&&(e.FDate_ge=this.search_form.date[0],e.FDate_le=this.search_form.date[1]),this.search_form.bill_no&&(e.FBillNo_lk=this.search_form.bill_no),this.search_form.receiver&&(e.F_PAEZ_Text_lk=this.search_form.receiver),this.search_form.close_status&&(e.FCloseStatus=this.search_form.close_status),this.load_more_status="loading",T.query(e,a).then((e=>{this.load_more_status=e.data.length<this.per_page?"nomore":"more",e.data.forEach((e=>this.delivery_notices.push(e)))}))},reload_delivery_notices(){this.delivery_notices=[],this.load_more_status="more",this.page=1,this.load_delivery_notices()},fab_trigger(e){0===e.index&&this.$refs.search_dialog.open(),1===e.index&&a({scrollTop:0})},load_more(){"nomore"!=this.load_more_status&&(this.page+=1,this.load_delivery_notices())},search_dialog_close(){console.log("this.$data",this.$data),this.$refs.search_dialog.close()},search_dialog_confirm(){this.reload_delivery_notices(),this.search_dialog_close()},show_delivery_notice(e){S("/pages/k3cloud/xiaoshouguanli/fahuotongzhidan/show?id="+e)}}},[["render",function(e,t,a,$,S,T){const A=g(o("uni-table"),p),E=m,M=g(o("uni-list-item"),y),U=g(o("uni-list"),v),B=g(o("uni-load-more"),b),O=g(o("uni-fab"),x),W=g(o("uni-datetime-picker"),j),q=g(o("uni-forms-item"),F),L=g(o("uni-col"),w),N=g(o("uni-easyinput"),D),Z=g(o("uni-data-select"),V),z=g(o("uni-row"),C),R=g(o("uni-forms"),k),G=g(o("uni-popup-dialog"),I),H=g(o("uni-popup"),P);return d(),s(_,null,[e.$store.state.system_info.windowWidth>=12e3?(d(),l(A,{key:0,ref:"table",border:"",stripe:""},null,512)):(d(),l(U,{key:1},{default:i((()=>[(d(!0),s(_,null,n(S.delivery_notices,((t,a)=>(d(),l(M,{key:a,onClick:e=>T.show_delivery_notice(t.FID),clickable:"","show-arrow":""},{body:i((()=>[r(E,{class:"uni-list-item__body"},{default:i((()=>[r(E,{class:"title"},{default:i((()=>[u(f(t.FBillNo),1)])),_:2},1024),r(E,{class:"note"},{default:i((()=>[r(E,null,{default:i((()=>[u("发货组织："+f(t["FDeliveryOrgId.FName"]),1)])),_:2},1024),r(E,null,{default:i((()=>[u("收货人："+f(t.F_PAEZ_Text),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),footer:i((()=>[r(E,{class:"uni-list-item__foot"},{default:i((()=>[r(E,null,{default:i((()=>[u(f(T.formatDate(t.FDate,"yyyy-MM-dd")),1)])),_:2},1024),r(E,{class:h("A"==t.FCloseStatus?"text-primary":"")},{default:i((()=>[u(f(e.$store.state.close_status_dict[t.FCloseStatus]),1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})),r(B,{status:S.load_more_status,onClickLoadMore:T.load_more},null,8,["status","onClickLoadMore"]),r(O,{ref:"fab",content:S.fab_content,onTrigger:T.fab_trigger,show:""},null,8,["content","onTrigger"]),r(H,{ref:"search_dialog",type:"dialog"},{default:i((()=>[r(G,{type:"info",title:"搜索条件",cancelText:"关闭",onClose:T.search_dialog_close,onConfirm:T.search_dialog_confirm,"before-close":!0,style:c({width:e.$store.state.system_info.windowWidth-20+"px",minWidth:"360px",maxWidth:"1200px"})},{default:i((()=>[r(E,{class:"search-form"},{default:i((()=>[r(R,{ref:"search_form",model:S.search_form,"label-width":100},{default:i((()=>[r(z,{gutter:15},{default:i((()=>[r(L,{md:8,sm:12,xs:24},{default:i((()=>[r(q,{label:"日期"},{default:i((()=>[r(W,{modelValue:S.search_form.date,"onUpdate:modelValue":t[0]||(t[0]=e=>S.search_form.date=e),type:"daterange","start-placeholder":"开始","end-placeholder":"结束"},null,8,["modelValue"])])),_:1})])),_:1}),r(L,{md:8,sm:12,xs:24},{default:i((()=>[r(q,{label:"单据编号"},{default:i((()=>[r(N,{modelValue:S.search_form.bill_no,"onUpdate:modelValue":t[1]||(t[1]=e=>S.search_form.bill_no=e)},null,8,["modelValue"])])),_:1})])),_:1}),r(L,{md:8,sm:12,xs:24},{default:i((()=>[r(q,{label:"收货人"},{default:i((()=>[r(N,{modelValue:S.search_form.receiver,"onUpdate:modelValue":t[2]||(t[2]=e=>S.search_form.receiver=e)},null,8,["modelValue"])])),_:1})])),_:1}),r(L,{md:8,sm:12,xs:24},{default:i((()=>[r(q,{label:"关闭状态"},{default:i((()=>[r(Z,{modelValue:S.search_form.close_status,"onUpdate:modelValue":t[3]||(t[3]=e=>S.search_form.close_status=e),localdata:[{value:"A",text:"未关闭"},{value:"B",text:"关闭"}]},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["onClose","onConfirm","style"])])),_:1},512)],64)}],["__scopeId","data-v-d4a6fc60"]]);export{M as default};
