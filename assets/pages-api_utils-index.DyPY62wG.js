import{n as e,as as t,m as a,b as i,a3 as l,at as o,c as r,d as n,w as s,i as c,o as u,e as p,q as m,u as d,F as _}from"./index-DWoH3vfe.js";import{_ as f}from"./uni-list-item.DDtNoANW.js";import{r as k}from"./uni-app.es.BmoqNwAf.js";import{_ as g}from"./uni-list.BUls3DLZ.js";import{_ as F,a as b}from"./uni-collapse.Xutvcnjh.js";import{_ as h}from"./uni-section.iEIUA4ss.js";import{X as y}from"./xlsx.uBlg2PW8.js";import"./k3cloudapi.RL4SGN7f.js";import{l as v,s as C}from"./index.CbUtXxpp.js";import{B as N}from"./bd_material.LNkuklG2.js";import{a as w}from"./stock_loc.DkKMhjD6.js";import{I as S}from"./inv_log.B23E6Sfg.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.Btv09wDc.js";import"./uni-badge.Dyjwvs1c.js";const j=x({data:()=>({categories:[{value:"login",name:"登录认证",children:[{value:"validateUser",name:"ValidateUser / 用户名/密码"}]},{value:"gongyinglian",name:"供应链",children:[{value:"bd_stock",name:"BD_STOCK / 仓库"},{value:"stk_inventory",name:"STK_INVENTORY / 即时库存"},{value:"stk_transferdirect",name:"STK_TransferDirect / 直接调拨单 "}]},{value:"jichuguanli",name:"基础管理",children:[{value:"bd_customer",name:"BD_CUSTOMER / 客户"},{value:"bd_empinfo",name:"BD_Empinfo / 员工"},{value:"bd_material",name:"BD_MATERIAL / 物料"},{value:"bd_unit",name:"BD_UNIT / 计量单位"},{value:"bd_warehouseworkers",name:"BD_WAREHOUSEWORKERS / 仓管员"}]}]}),methods:{link_to:v,goDetailPage(t,a){e({url:`/pages/api_utils/${t}/${a}`})},scanCode(){t({success:function(e){this.$logger.info("uni.scanCode res:",e),a({title:e.scanType,content:e.result,showCancel:!1,confirmText:"确定"})}})},share(){uni.share({provider:"weixin",scene:"WXSceneSession",type:1,summary:"我正在使用HBuilderX开发uni-app，赶紧跟我一起来体验！",success:function(e){this.$logger.info("success:",e)},fail:function(e){this.$logger.info("fail:",e),i({icon:"none",title:e.errMsg})}})},playAudio(){i({icon:"none",title:"播放声音"});const e=l();e.src="/static/audio/success.mp3",e.play()},vibrate(){i({icon:"none",title:"振动"}),uni.vibrate({success:e=>{this.$logger.info("uni.vibrate res:",e)},fail:e=>{this.$logger.info("uni.vibrate err:",e)}})},getLocation(){o({type:"wgs84",success:e=>{this.$logger.info("uni.getLocation res:",e)},fail:e=>{this.$logger.info("uni.getLocation err:",e)}})},async call_test_api(){},call_delete_api(){},async export_refer_mno(){let e=1,t={FDocumentStatus:"C",FForbidStatus:"A",FUseOrgId:1,"FMaterialGroup.FNumber_ge":"3.07.02.35"},a={},i=0;for(;;){let l=await N.query(t,{page:e,per_page:5e3,order:"FMaterialGroup.FNumber ASC"});for(let e of l.data)a[e["FMaterialGroup.FNumber"]]?(e.FNumber<a[e["FMaterialGroup.FNumber"]][0]&&(a[e["FMaterialGroup.FNumber"]][0]=e.FNumber),e.FNumber>a[e["FMaterialGroup.FNumber"]][1]&&(a[e["FMaterialGroup.FNumber"]][1]=e.FNumber)):a[e["FMaterialGroup.FNumber"]]=[e.FNumber,e.FNumber],console.log(".");if(e++,i++,console.log(`>>> CNT: ${i}, t: ${new Date}`),l.data.length<5e3)break}let l=[["物料分组","参考物料编码(最小)","参考物料编码(最大)"]];for(let u in a)l.push([u,a[u][0],a[u][1]]);let o=y.utils.aoa_to_sheet(l),r=y.utils.book_new();y.utils.book_append_sheet(r,o,"Sheet1");var n=y.write(r,{bookType:"xlsx",bookSST:!0,type:"binary"});const s=new Blob([C(n)],{type:"application/octet-stream"});let c=document.createElement("a");c.href=URL.createObjectURL(s),c.download=`参考物料模板_${Date.now()}.xlsx`,c.click(),URL.revokeObjectURL(c.href)},async retry_inv_plan(e){S.query({FBillNo:e}).then((e=>{S.delete(e.data.map((e=>e.FID)))})),w.query({FBillNo:e}).then((e=>{for(let t of e.data){let e={FOpType:t.FOpType,FStockId:t.FStockId,FStockLocNo:t["FStockLocId.FNumber"],FMaterialId:t.FMaterialId,FOpQTY:t.FOpQTY,FBatchNo:t.FBatchNo,FBillNo:t.FBillNo,FOpStaffNo:t.FOpStaffNo,FRemark:t.FRemark,FReceiver:t.FReceiver};new S(e).save()}}))},async retry_inv_plan_sn(e){let t=await w.query({FOpSN:e});for(let a of t.data)await w.execute(a)}}},[["render",function(e,t,a,i,l,o){const y=k(r("uni-list-item"),f),v=k(r("uni-list"),g),C=k(r("uni-collapse-item"),F),N=k(r("uni-collapse"),b),w=k(r("uni-section"),h),S=c;return u(),n(S,null,{default:s((()=>[p(w,{title:"API调试","sub-title":"Kingdee系统API数据查询展示，仅用来测试API对接。",type:"line"},{default:s((()=>[p(v,null,{default:s((()=>[p(y,{"show-extra-icon":!0,"extra-icon":{color:"#007aff",size:"24",type:"right"},title:"Console",onClick:t[0]||(t[0]=e=>o.link_to("/pages/api_utils/console")),clickable:"","show-arrow":""}),p(y,{"show-extra-icon":!0,"extra-icon":{color:"#dd524d",size:"24",type:"link"},title:"API调用(代码测试)",clickable:"",onClick:t[1]||(t[1]=e=>o.call_test_api())}),p(y,{"show-extra-icon":!0,"extra-icon":{color:"#dd524d",size:"24",type:"link"},title:"删除接口调用(代码测试)",clickable:"",onClick:t[2]||(t[2]=e=>o.call_delete_api())})])),_:1}),p(N,{accordion:""},{default:s((()=>[(u(!0),m(_,null,d(l.categories,(e=>(u(),n(C,{key:e.value,title:e.name},{default:s((()=>[p(v,null,{default:s((()=>[(u(!0),m(_,null,d(e.children,(t=>(u(),n(y,{key:t.value,title:t.name,clickable:"",showArrow:"",onClick:a=>o.goDetailPage(e.value,t.value)},null,8,["title","onClick"])))),128))])),_:2},1024)])),_:2},1032,["title"])))),128))])),_:1})])),_:1}),p(w,{title:"全局状态","sub-title":"全局参数展示，仅用于调试。",type:"line"},{default:s((()=>[p(v,null,{default:s((()=>[p(y,{title:"store.state",clickable:"",showArrow:"",onClick:t[3]||(t[3]=e=>o.goDetailPage("store","store"))}),p(y,{title:"getSystemInfo",clickable:"",showArrow:"",onClick:t[4]||(t[4]=e=>o.goDetailPage("store","get_system_info"))}),p(y,{title:"Chart",clickable:"",onClick:t[5]||(t[5]=e=>o.goDetailPage("store","chart"))}),p(y,{title:"scanCode(安卓原生插件)",clickable:"",onClick:o.scanCode},null,8,["onClick"]),p(y,{title:"share(微信开放平台APPID)",clickable:"",onClick:o.share},null,8,["onClick"]),p(y,{title:"播放声音",clickable:"",onClick:o.playAudio},null,8,["onClick"]),p(y,{title:"振动(不能用)",click:"",onClick:o.vibrate},null,8,["onClick"]),p(y,{title:"getLocation(需要商业授权)",click:"",onClick:o.getLocation},null,8,["onClick"])])),_:1})])),_:1})])),_:1})}]]);export{j as default};
